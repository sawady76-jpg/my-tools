<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç¤¾å†…FAQ çˆ†é€Ÿæ¤œç´¢ãã‚“</title>
<style>
    body { font-family: "Helvetica Neue", Arial, sans-serif; background-color: #f4f7f9; color: #333; padding: 20px; }
    .container { max-width: 800px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); border-top: 5px solid #009688; }
    h2 { text-align: center; color: #009688; margin-bottom: 20px; }

    /* æ¤œç´¢ã‚¨ãƒªã‚¢ */
    .search-area { position: sticky; top: 0; background: #fff; padding: 10px 0 20px 0; z-index: 10; border-bottom: 1px solid #eee; }
    input[type="text"] { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 50px; font-size: 20px; outline: none; box-sizing: border-box; transition: border-color 0.3s; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
    input[type="text"]:focus { border-color: #009688; }
    .hit-count { text-align: right; font-size: 0.9em; color: #888; margin-top: 5px; }

    /* çµæœãƒªã‚¹ãƒˆ */
    #resultList { list-style: none; padding: 0; margin-top: 20px; }
    .faq-item { background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 15px; padding: 20px; transition: 0.2s; border-left: 5px solid #ddd; }
    .faq-item:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.08); border-left-color: #009688; }
    
    .faq-q { font-weight: bold; font-size: 1.1em; color: #333; margin-bottom: 10px; display: flex; align-items: flex-start; gap: 10px; }
    .faq-q::before { content: "Q."; color: #009688; font-weight: bold; }
    
    .faq-a { font-size: 1em; color: #555; line-height: 1.6; white-space: pre-wrap; display: flex; align-items: flex-start; gap: 10px; }
    .faq-a::before { content: "A."; color: #e91e63; font-weight: bold; }

    /* è¨­å®šã‚¨ãƒªã‚¢ï¼ˆã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ï¼‰ */
    .settings-toggle { margin-top: 40px; text-align: center; }
    .btn-toggle { background: none; border: none; color: #999; cursor: pointer; text-decoration: underline; font-size: 0.9em; }
    .settings-area { display: none; background: #f0f0f0; padding: 20px; border-radius: 8px; margin-top: 10px; }
    .settings-area.open { display: block; }
    
    textarea { width: 100%; height: 200px; padding: 10px; border: 1px solid #ccc; font-size: 14px; font-family: monospace; resize: vertical; }
    .btn-save { background-color: #009688; color: white; border: none; padding: 10px 20px; border-radius: 4px; font-size: 16px; cursor: pointer; margin-top: 10px; font-weight: bold; }
    .btn-save:hover { background-color: #00796b; }

    /* ãƒã‚¤ãƒ©ã‚¤ãƒˆ */
    .highlight { background-color: #fff176; font-weight: bold; }
</style>
</head>
<body>

<div class="container">
    <h2>ğŸ” ç¤¾å†…FAQ çˆ†é€Ÿæ¤œç´¢ãã‚“</h2>
    
    <div class="search-area">
        <input type="text" id="searchInput" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šè¿”å“ é€æ–™ï¼‰" oninput="searchFAQ()" autofocus>
        <div class="hit-count" id="hitCount">å…¨ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºä¸­</div>
    </div>

    <ul id="resultList">
        </ul>

    <div class="settings-toggle">
        <button class="btn-toggle" onclick="toggleSettings()">âš™ï¸ ãƒ‡ãƒ¼ã‚¿ã®ç™»éŒ²ãƒ»ç·¨é›†ã¯ã“ã¡ã‚‰</button>
    </div>

    <div class="settings-area" id="settingsArea">
        <h3>ãƒ‡ãƒ¼ã‚¿ã®ç™»éŒ²</h3>
        <p style="font-size:0.9em; color:#666;">
            Excelã®ã€Œè³ªå•ã€ã€Œå›ç­”ã€ã®2åˆ—ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ã€Œä¿å­˜ã€ã—ã¦ãã ã•ã„ã€‚<br>
            â€»ã‚¿ãƒ–åŒºåˆ‡ã‚Šï¼ˆTSVï¼‰å½¢å¼ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
        </p>
        <textarea id="dataInput" placeholder="è³ªå•    å›ç­”&#13;è¿”å“ã¯ã§ãã¾ã™ã‹ï¼Ÿ    æœªé–‹å°ã§ã‚ã‚Œã°åˆ°ç€å¾Œ7æ—¥ä»¥å†…ãªã‚‰å¯èƒ½ã§ã™ã€‚&#13;é€æ–™ã¯ã„ãã‚‰ï¼Ÿ    å…¨å›½ä¸€å¾‹800å††ã§ã™ã€‚"></textarea>
        <button class="btn-save" onclick="saveData()">ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦æ›´æ–°</button>
        <button style="float:right; margin-top:10px; border:none; background:none; color:red; cursor:pointer;" onclick="clearData()">ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿ã‚’æ¶ˆå»</button>
    </div>
</div>

<script>
    // åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰
    const defaultData = [
        { q: "è¿”å“ã¯ã§ãã¾ã™ã‹ï¼Ÿ", a: "åŸå‰‡ã¨ã—ã¦ã€æœªé–‹å°ã‹ã¤å•†å“åˆ°ç€å¾Œ8æ—¥ä»¥å†…ã§ã‚ã‚Œã°å¯èƒ½ã§ã™ã€‚\nãŠå®¢æ§˜éƒ½åˆã®å ´åˆã¯é€æ–™ã‚’ã”è² æ‹…ã„ãŸã ãã¾ã™ã€‚" },
        { q: "é€æ–™ã¯ã„ãã‚‰ã‹ã‹ã‚Šã¾ã™ã‹ï¼Ÿ", a: "å…¨å›½ä¸€å¾‹880å††ï¼ˆç¨è¾¼ï¼‰ã§ã™ã€‚\nãŸã ã—ã€æ²–ç¸„ãƒ»é›¢å³¶ã¯åˆ¥é€”è¦‹ç©ã‚‚ã‚ŠãŒå¿…è¦ã§ã™ã€‚\nåˆè¨ˆ3ä¸‡å††ä»¥ä¸Šã§é€æ–™ç„¡æ–™ã«ãªã‚Šã¾ã™ã€‚" },
        { q: "é ˜åæ›¸ã®ç™ºè¡Œã¯å¯èƒ½ã§ã™ã‹ï¼Ÿ", a: "ã¯ã„ã€å¯èƒ½ã§ã™ã€‚\næ³¨æ–‡æ™‚ã®å‚™è€ƒæ¬„ã«ã€Œé ˜åæ›¸å¸Œæœ›ã€ã¨å®›åã‚’ã”è¨˜å…¥ãã ã•ã„ã€‚\nPDFå½¢å¼ã§ãƒ¡ãƒ¼ãƒ«ã«ã¦é€ä»˜ã„ãŸã—ã¾ã™ã€‚" },
        { q: "åœŸæ—¥ã®å‡ºè·ã¯ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ", a: "åœŸæ—¥ç¥æ—¥ã¯å‡ºè·æ¥­å‹™ã¯ãŠä¼‘ã¿ã‚’ã„ãŸã ã„ã¦ãŠã‚Šã¾ã™ã€‚\né‡‘æ›œæ—¥ã®15æ™‚ä»¥é™ã®ã”æ³¨æ–‡ã¯ã€ç¿Œå–¶æ¥­æ—¥ï¼ˆæœˆæ›œæ—¥ãªã©ï¼‰ã®å‡ºè·ã¨ãªã‚Šã¾ã™ã€‚" },
        { q: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¿˜ã‚Œã¾ã—ãŸ", a: "ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ã€Œãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãŠå¿˜ã‚Œã®æ–¹ã€ãƒªãƒ³ã‚¯ã‹ã‚‰å†ç™ºè¡Œæ‰‹ç¶šãã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚\nç™»éŒ²ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¿…è¦ã§ã™ã€‚" }
    ];

    let faqData = [];

    // èµ·å‹•æ™‚ã®å‡¦ç†
    window.onload = function() {
        loadData();
        searchFAQ(); // å…¨ä»¶è¡¨ç¤º
    };

    // ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
    function loadData() {
        const savedData = localStorage.getItem('myFaqData');
        if (savedData) {
            faqData = JSON.parse(savedData);
            // ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã«ã‚‚åæ˜ ï¼ˆç·¨é›†ç”¨ï¼‰
            document.getElementById('dataInput').value = convertToText(faqData);
        } else {
            faqData = defaultData;
            document.getElementById('dataInput').value = convertToText(defaultData);
        }
    }

    // ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
    function saveData() {
        const rawText = document.getElementById('dataInput').value;
        const lines = rawText.split('\n');
        const newData = [];

        lines.forEach(line => {
            const parts = line.split('\t'); // ã‚¿ãƒ–åŒºåˆ‡ã‚Š
            if (parts.length >= 2) {
                const q = parts[0].trim();
                const a = parts.slice(1).join('\n').trim(); // 2åˆ—ç›®ä»¥é™ã¯ã™ã¹ã¦å›ç­”ã¨ã¿ãªã™
                if (q && a) {
                    newData.push({ q: q, a: a });
                }
            }
        });

        faqData = newData;
        localStorage.setItem('myFaqData', JSON.stringify(faqData));
        toggleSettings(); // é–‰ã˜ã‚‹
        searchFAQ(); // å†æ¤œç´¢
        alert('ä¿å­˜ã—ã¾ã—ãŸï¼æ¬¡å›ã‹ã‚‰ã‚‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã§æ¤œç´¢ã§ãã¾ã™ã€‚');
    }

    // ãƒ‡ãƒ¼ã‚¿ã‚’æ¶ˆå»
    function clearData() {
        if(confirm('ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦æ¶ˆå»ã—ã¦åˆæœŸçŠ¶æ…‹ã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ')) {
            localStorage.removeItem('myFaqData');
            location.reload();
        }
    }

    // æ¤œç´¢å‡¦ç†
    function searchFAQ() {
        const input = document.getElementById('searchInput').value;
        const keywords = input.trim().toLowerCase().split(/\s+/); // ç©ºç™½ã§åŒºåˆ‡ã£ã¦ANDæ¤œç´¢
        const list = document.getElementById('resultList');
        const countDisplay = document.getElementById('hitCount');
        
        list.innerHTML = '';

        let hitCount = 0;

        faqData.forEach(item => {
            const qText = item.q.toLowerCase();
            const aText = item.a.toLowerCase();
            
            // å…¨ã¦ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ (ANDæ¤œç´¢)
            const isMatch = keywords.every(kw => qText.includes(kw) || aText.includes(kw));

            if (isMatch) {
                hitCount++;
                const li = document.createElement('li');
                li.className = 'faq-item';
                
                // ãƒã‚¤ãƒ©ã‚¤ãƒˆå‡¦ç†
                let displayQ = escapeHtml(item.q);
                let displayA = escapeHtml(item.a);

                if (input.trim() !== '') {
                    keywords.forEach(kw => {
                        if (kw === '') return;
                        const regex = new RegExp(`(${escapeRegExp(kw)})`, 'gi');
                        displayQ = displayQ.replace(regex, '<span class="highlight">$1</span>');
                        displayA = displayA.replace(regex, '<span class="highlight">$1</span>');
                    });
                }

                li.innerHTML = `
                    <div class="faq-q">${displayQ}</div>
                    <div class="faq-a">${displayA}</div>
                `;
                list.appendChild(li);
            }
        });

        countDisplay.textContent = input.trim() === '' ? `å…¨ ${faqData.length} ä»¶` : `${hitCount} ä»¶ãƒ’ãƒƒãƒˆ`;
    }

    // è¨­å®šã‚¨ãƒªã‚¢ã®é–‹é–‰
    function toggleSettings() {
        const area = document.getElementById('settingsArea');
        area.classList.toggle('open');
    }

    // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ï¼šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé…åˆ—ã‚’ãƒ†ã‚­ã‚¹ãƒˆï¼ˆTSVï¼‰ã«å¤‰æ›
    function convertToText(data) {
        return data.map(item => `${item.q}\t${item.a}`).join('\n');
    }

    function escapeHtml(str) {
        return str.replace(/[&<>"']/g, function(m) {
            return { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;' }[m];
        });
    }

    function escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }
</script>

</body>
</html>