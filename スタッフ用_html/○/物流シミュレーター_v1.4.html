<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç‰©æµè¨ˆç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ v1.4</title>
<style>
    body { font-family: "Helvetica Neue", Arial, sans-serif; background-color: #f0f4f8; color: #333; padding: 20px; display: flex; justify-content: center; }
    .container { width: 100%; max-width: 650px; background: #fff; padding: 0; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); overflow: hidden; }
    
    /* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
    .tab-header { display: flex; background: #e9ecef; border-bottom: 1px solid #ddd; }
    .tab-btn { flex: 1; padding: 15px; border: none; background: none; cursor: pointer; font-weight: bold; color: #666; transition: 0.3s; border-bottom: 4px solid transparent; }
    .tab-btn:hover { background: #dee2e6; color: #0056b3; }
    .tab-btn.active { background: #fff; color: #0056b3; border-bottom-color: #0056b3; }
    
    /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
    .content-area { padding: 25px; display: none; animation: fadeIn 0.3s ease; }
    .content-area.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    h2 { text-align: center; color: #0056b3; margin-top: 0; margin-bottom: 10px; font-size: 1.4rem; }
    
    /* æ›´æ–°å±¥æ­´ã‚¨ãƒªã‚¢ (New) */
    .top-history { margin-bottom: 20px; font-size: 0.75em; color: #666; background: #f8f9fa; border-radius: 4px; padding: 5px 10px; border: 1px solid #e9ecef; }
    .top-history summary { cursor: pointer; font-weight: bold; outline: none; }
    .top-history ul { margin: 5px 0 0 0; padding-left: 20px; list-style-type: square; }
    .top-history li { margin-bottom: 2px; }

    .input-group { margin-bottom: 20px; }
    label { display: block; font-weight: bold; margin-bottom: 8px; color: #555; }
    
    select, input[type="number"], input[type="text"] { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; box-sizing: border-box; outline: none; transition: 0.3s; }
    select:focus, input:focus { border-color: #0056b3; }

    /* æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */
    .filter-input { margin-bottom: 10px; font-size: 0.9em; padding: 8px !important; background-color: #fcfcfc; }

    /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
    .result-area { background-color: #f0f8ff; border: 2px solid #b3d7ff; border-radius: 8px; padding: 20px; margin-top: 20px; display: none; }
    .result-area.active { display: block; animation: zoomIn 0.2s ease; }
    @keyframes zoomIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

    .result-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; border-bottom: 1px dashed #cce5ff; padding-bottom: 8px; }
    .result-row:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .res-label { color: #666; font-size: 0.9em; }
    .res-value { font-weight: bold; font-size: 1.2em; color: #333; }
    .res-value.highlight { color: #0056b3; font-size: 1.4em; }
    
    /* ãƒ‘ãƒ¬ãƒƒãƒˆæ³¨é‡ˆ */
    .pallet-note { display: block; font-size: 0.6em; font-weight: normal; color: #e65100; margin-top: 2px; }
    .error-reason { font-size: 0.6em; color: #d32f2f; font-weight: normal; margin-left: 5px; }

    .spec-info { font-size: 0.85em; color: #666; margin-top: 8px; padding: 8px; background: #eee; border-radius: 4px; }
    .version { text-align: right; font-size: 0.8em; color: #aaa; margin-top: 10px; border-top: 1px solid #eee; padding-top: 5px; }

    /* ã‚¬ã‚¤ãƒ‰ã‚¿ãƒ–ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
    .guide-section { margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
    .guide-section:last-child { border-bottom: none; }
    .guide-title { font-weight: bold; color: #0056b3; margin-bottom: 10px; display: flex; align-items: center; }
    .guide-text { font-size: 0.95em; color: #555; line-height: 1.6; }
    .guide-note { font-size: 0.85em; background: #fff3cd; color: #856404; padding: 10px; border-radius: 6px; margin-top: 10px; }
    .step-list { padding-left: 20px; margin: 5px 0; }
    .step-list li { margin-bottom: 5px; }

</style>
</head>
<body>

<div class="container">
    <div class="tab-header">
        <button class="tab-btn active" onclick="switchTab('tab-sim')">ğŸšš ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</button>
        <button class="tab-btn" onclick="switchTab('tab-guide')">ğŸ“– ä½¿ã„æ–¹ãƒ»ä»•æ§˜</button>
    </div>

    <div id="tab-sim" class="content-area active">
        <h2>ç‰©æµãƒ»è·å§¿ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h2>

        <details class="top-history">
            <summary>æ›´æ–°å±¥æ­´ (æœ€æ–°: v1.4)</summary>
            <ul>
                <li><strong>v1.4:</strong> ç”»é¢ä¸Šéƒ¨ã«æ›´æ–°å±¥æ­´ã®è¡¨ç¤ºã‚’è¿½åŠ ã€‚</li>
                <li><strong>v1.3:</strong> ã€Œé•·å°ºãƒ‘ãƒ¬ãƒƒãƒˆ(900Ã—1800)ã€ã®è‡ªå‹•åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿè£…ã€‚ãƒ‘ãƒ¬ãƒƒãƒˆæ•°0æ™‚ã®ç†ç”±è¡¨ç¤ºã‚’è¿½åŠ ã€‚</li>
                <li><strong>v1.2:</strong> ã€Œä½¿ã„æ–¹ãƒ»ä»•æ§˜ã€ã‚¿ãƒ–ã‚’è¿½åŠ ã€‚</li>
                <li><strong>v1.1:</strong> å•†å“ãƒã‚¹ã‚¿ãƒ¼ã‚’2026.1.27ç‰ˆã«æ›´æ–°ã€‚ä¸»è¦å•†æã®ç©è¼‰ãƒ‡ãƒ¼ã‚¿ã‚’æ‹¡å……ã€‚</li>
            </ul>
        </details>

        <div class="input-group">
            <label>â‘  å•†å“ã‚’é¸æŠ</label>
            <input type="text" id="filterInput" class="filter-input" placeholder="ğŸ” å“åã‚’å…¥åŠ›ã—ã¦çµã‚Šè¾¼ã¿..." oninput="filterProducts()">
            <select id="productSelect" onchange="calculateLogistics()" size="5" style="height: 120px;">
                </select>
            <div id="specDisplay" class="spec-info">å•†å“ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
        </div>

        <div class="input-group">
            <label>â‘¡ ç™ºæ³¨æ•°é‡ (ãƒãƒ©å€‹æ•°/æšæ•°/æœ¬æ•°)</label>
            <input type="number" id="inputQty" placeholder="ä¾‹ï¼š100" min="0" oninput="calculateLogistics()">
        </div>

        <div id="resultArea" class="result-area">
            <div class="result-row">
                <span class="res-label">ğŸ“¦ è·å§¿ï¼ˆã‚±ãƒ¼ã‚¹æ•°ï¼‰</span>
                <span class="res-value highlight" id="resCase">0 ã‚±ãƒ¼ã‚¹</span>
            </div>
            <div class="result-row">
                <span class="res-label">âš–ï¸ ç·é‡é‡ï¼ˆç›®å®‰ï¼‰</span>
                <span class="res-value" id="resWeight">0 kg</span>
            </div>
            <div class="result-row">
                <span class="res-label">ğŸ—ï¸ ãƒ‘ãƒ¬ãƒƒãƒˆæ›ç®—</span>
                <span class="res-value" id="resPallet">0 PL</span>
            </div>
        </div>
        <div class="version">Data: 2026.1.27 ver.</div>
    </div>

    <div id="tab-guide" class="content-area">
        <h2>ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦</h2>
        
        <div class="guide-section">
            <div class="guide-title">ğŸ“Œ ç›®çš„</div>
            <div class="guide-text">
                ç™ºæ³¨äºˆå®šã®å•†å“ãŒ<strong>ã€Œå…¨éƒ¨ã§ä½•ã‚±ãƒ¼ã‚¹ã«ãªã‚‹ã‹ã€ã€Œé‡é‡ã¯ã©ã‚Œãã‚‰ã„ã‹ã€ã€Œãƒˆãƒ©ãƒƒã‚¯ã®ãƒ‘ãƒ¬ãƒƒãƒˆä½•æšåˆ†ã‹ã€</strong>ã‚’ç¬æ™‚ã«è¨ˆç®—ã—ã€é…è»Šã‚„ä¿ç®¡ã‚¹ãƒšãƒ¼ã‚¹ã®ç¢ºä¿ã«å½¹ç«‹ã¦ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
            </div>
        </div>

        <div class="guide-section">
            <div class="guide-title">ğŸ“ ãƒ‘ãƒ¬ãƒƒãƒˆã‚µã‚¤ã‚ºã«ã¤ã„ã¦</div>
            <div class="guide-text">
                å•†å“ã®ç¨®é¡ã«ã‚ˆã£ã¦ã€è¨ˆç®—åŸºæº–ã¨ãªã‚‹ãƒ‘ãƒ¬ãƒƒãƒˆã‚µã‚¤ã‚ºã‚’è‡ªå‹•ã§åˆ‡ã‚Šæ›¿ãˆã¦ã„ã¾ã™ã€‚<br>
                <ul>
                    <li><strong>é€šå¸¸å•†å“ï¼š</strong> 11å‹ãƒ‘ãƒ¬ãƒƒãƒˆ (1100Ã—1100mm)</li>
                    <li><strong>é•·å°ºãƒ»å¤§å‹ï¼š</strong> ã‚µãƒ–ãƒ­ã‚¯ãƒ‘ãƒ¬ãƒƒãƒˆ (1800Ã—900mm)<br>
                        <span style="font-size:0.9em; color:#e65100;">ï¼ˆå¯¾è±¡ï¼šãƒ—ãƒ©ãƒ™ãƒ‹ãƒ¤ã€ãƒ™ã‚¹ãƒˆãƒœãƒ¼ãƒ‰ã€ãƒãƒªãƒ•ã‚£ãƒ«ãƒ ãªã©ï¼‰</span>
                    </li>
                </ul>
            </div>
        </div>

        <div class="guide-section">
            <div class="guide-title">âš ï¸ ãƒ‘ãƒ¬ãƒƒãƒˆè¨ˆç®—ã€Œ0ã€ã®ç†ç”±</div>
            <div class="guide-text">
                è¨ˆç®—çµæœãŒã€Œ0 PLã€ã«ãªã‚‹å ´åˆã€ä»¥ä¸‹ã®ç†ç”±ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
                <ul>
                    <li><strong>ã€Œç©è¼‰ãƒ‡ãƒ¼ã‚¿ãªã—ã€</strong>ï¼šå•†å“ãƒã‚¹ã‚¿ãƒ¼ã«ãƒ‘ãƒ¬ãƒƒãƒˆç©è¼‰æ•°ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</li>
                    <li><strong>ã€Œãƒ‘ãƒ¬ãƒƒãƒˆæœªæº€ã€</strong>ï¼šæ•°é‡ãŒå°‘ãªãã€1ãƒ‘ãƒ¬ãƒƒãƒˆã«æº€ãŸãªã„é‡ã§ã™ï¼ˆãƒãƒ©å‡ºè·ãªã©ï¼‰ã€‚</li>
                </ul>
            </div>
        </div>
    </div>

</div>

<script>
    // --- å•†å“ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ (2026.1.27ç‰ˆ + è£œå®Œ) ---
    // isLong: trueãªã‚‰é•·å°ºãƒ‘ãƒ¬ãƒƒãƒˆ(900x1800)ã¨ã—ã¦è¨ˆç®—
    const productData = [
        { name: "è¶³å ´ã‚´ãƒ ãƒãƒ³ãƒ‰", perCase: 200, weightCase: 23.0, perPallet: 0, isLong: false },
        { name: "è¶³å ´ãƒã‚§ãƒ¼ãƒ³ 2m", perCase: 20, weightCase: 24.0, perPallet: 0, isLong: false },
        { name: "è¶³å ´ãƒã‚§ãƒ¼ãƒ³ 4m", perCase: 10, weightCase: 23.0, perPallet: 0, isLong: false },
        { name: "ã‚¢ãƒ³ã‚«ãƒ¼ãƒœãƒ«ãƒˆ M12Ã—400", perCase: 50, weightCase: 16.25, perPallet: 48, isLong: false },
        { name: "ã‚¢ãƒ³ã‚«ãƒ¼ãƒœãƒ«ãƒˆ M12Ã—450", perCase: 50, weightCase: 18.0, perPallet: 48, isLong: false },
        { name: "ã‚¢ãƒ³ã‚«ãƒ¼ãƒœãƒ«ãƒˆ M16Ã—600", perCase: 10, weightCase: 11.35, perPallet: 80, isLong: false },
        { name: "ã‚¢ãƒ³ã‚«ãƒ¼ãƒœãƒ«ãƒˆ M16Ã—700", perCase: 10, weightCase: 12.8, perPallet: 72, isLong: false },
        { name: "ã‚¢ãƒ³ã‚«ãƒ¼ãƒœãƒ«ãƒˆ M16Ã—800", perCase: 10, weightCase: 14.5, perPallet: 60, isLong: false },
        { name: "ã‚¢ãƒ³ã‚«ãƒ¼ãƒœãƒ«ãƒˆ M16Ã—900", perCase: 10, weightCase: 16.15, perPallet: 50, isLong: false },
        { name: "å®‰å…¨ãƒãƒƒãƒˆ(ç›®åˆ10cm) 5*10mè¼¸å…¥", perCase: 2, weightCase: 20.0, perPallet: 0, isLong: false },
        { name: "ä¸€è¼ªè»Šã‚¿ã‚¤ãƒ¤ã®ã¿", perCase: 5, weightCase: 11.3, perPallet: 0, isLong: false },
        { name: "MAã‚¹ã‚¿ãƒ³ãƒ‰", perCase: 1, weightCase: 3.75, perPallet: 320, isLong: false },
        { name: "ã‚¨ãƒ©ã‚¹ã‚¿ã‚¤ãƒˆ t10", perCase: 1, weightCase: 16.0, perPallet: 100, isLong: false },
        { name: "ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ³ H700", perCase: 20, weightCase: 21.5, perPallet: 20, isLong: false },
        { name: "ã‚¬ãƒ©è¢‹", perCase: 200, weightCase: 11.5, perPallet: 0, isLong: false },
        { name: "åŸºç¤ã‚µãƒãƒ¼ãƒˆ L1", perCase: 1, weightCase: 2.6, perPallet: 418, isLong: false },
        { name: "åŸºç¤ã‚µãƒãƒ¼ãƒˆ L2", perCase: 1, weightCase: 3.0, perPallet: 532, isLong: false },
        { name: "åŸºç¤ã‚µãƒãƒ¼ãƒˆ L3", perCase: 1, weightCase: 3.5, perPallet: 530, isLong: false },
        { name: "æ­å¤ªéƒ 1.1m", perCase: 1, weightCase: 3.0, perPallet: 100, isLong: false },
        { name: "æ­å¤ªéƒ 1.5m", perCase: 1, weightCase: 4.02, perPallet: 100, isLong: false },
        { name: "çµæŸç·š 10kg", perCase: 1, weightCase: 11.0, perPallet: 100, isLong: false },
        { name: "ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆã‚µã‚¤ã‚³ãƒ­ 30Ã—40", perCase: 200, weightCase: 21.6, perPallet: 40, isLong: false },
        { name: "ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆã‚µã‚¤ã‚³ãƒ­ 40Ã—50", perCase: 100, weightCase: 28.1, perPallet: 64, isLong: false },
        { name: "ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆã‚µã‚¤ã‚³ãƒ­ 50Ã—60", perCase: 50, weightCase: 19.8, perPallet: 84, isLong: false },
        { name: "ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆã‚µã‚¤ã‚³ãƒ­ 40Ã—50Ã—60", perCase: 50, weightCase: 12.9, perPallet: 120, isLong: false },
        { name: "ã‚³ãƒ³ãƒ†ãƒŠãƒãƒƒã‚¯ ä¸¸å‹(è§’)", perCase: 10, weightCase: 20.0, perPallet: 25, isLong: false },
        { name: "è€å€™æ€§å¤§å‹åœŸã®ã†", perCase: 10, weightCase: 30.0, perPallet: 10, isLong: false },
        { name: "ã€æ–°åŸºæº–ã€‘è€å€™æ€§å¤§å‹åœŸã®ã†(3å¹´)", perCase: 5, weightCase: 15.7, perPallet: 24, isLong: false },
        { name: "ç™½é˜²ç‚ã‚·ãƒ¼ãƒˆ 1.8Ã—5.4", perCase: 10, weightCase: 30.0, perPallet: 20, isLong: false },
        { name: "ç™½é˜²ç‚ã‚·ãƒ¼ãƒˆ 3.6Ã—5.4", perCase: 5, weightCase: 30.0, perPallet: 20, isLong: false },
        { name: "ç™½é˜²ç‚ã‚·ãƒ¼ãƒˆ 10Ã—10", perCase: 1, weightCase: 29.0, perPallet: 0, isLong: false },
        { name: "ç™½é˜²ç‚ã‚·ãƒ¼ãƒˆåŸå 1800Ã—50m", perCase: 1, weightCase: 28.0, perPallet: 15, isLong: true },
        
        // --- ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æœ›ã«ã‚ˆã‚Šè¿½åŠ /è£œå®Œ ---
        { name: "ãƒ—ãƒ©ãƒ™ãƒ‹ãƒ¤ 2.5mm", perCase: 20, weightCase: 10.0, perPallet: 42, isLong: true },
        { name: "ãƒ™ã‚¹ãƒˆãƒœãƒ¼ãƒ‰(é¤Šç”Ÿãƒœãƒ¼ãƒ‰) 3.0mm", perCase: 1, weightCase: 12.0, perPallet: 50, isLong: true }, // ä»®ãƒ‡ãƒ¼ã‚¿
        { name: "ãƒãƒªãƒ•ã‚£ãƒ«ãƒ (ãƒãƒªã‚·ãƒ¼ãƒˆ) #15", perCase: 2, weightCase: 10.0, perPallet: 30, isLong: true }, // ä»®ãƒ‡ãƒ¼ã‚¿
        
        { name: "ãƒ–ãƒ«ãƒ¼ã‚·ãƒ¼ãƒˆ #3000 5.4Ã—7.2", perCase: 5, weightCase: 28.0, perPallet: 20, isLong: false },
        { name: "é˜²éŸ³ã‚·ãƒ¼ãƒˆ 1.8Ã—3.4 é€šå¸¸", perCase: 2, weightCase: 22.0, perPallet: 40, isLong: false },
        { name: "é˜²éŸ³ã‚·ãƒ¼ãƒˆ 1.8Ã—5.4 è»½é‡", perCase: 5, weightCase: 31.1, perPallet: 0, isLong: false },
        { name: "ãƒŠãƒƒãƒˆã‚¢ãƒ³ã‚«ãƒ¼ 3åˆ†", perCase: 600, weightCase: 23.5, perPallet: 36, isLong: false },
        { name: "ãƒŠãƒƒãƒˆã‚¢ãƒ³ã‚«ãƒ¼ 4åˆ†", perCase: 300, weightCase: 22.0, perPallet: 24, isLong: false },
        { name: "æº¶æ¥ã‚¢ãƒ³ã‚«ãƒ¼ 1045", perCase: 600, weightCase: 16.7, perPallet: 36, isLong: false },
        { name: "ãƒ¯ãƒ³ã‚¿ãƒƒãƒå·®ç­‹ã‚¢ãƒ³ã‚«ãƒ¼ D10", perCase: 50, weightCase: 13.0, perPallet: 100, isLong: false },
        { name: "ãƒ¯ãƒ³ã‚¿ãƒƒãƒå·®ç­‹ã‚¢ãƒ³ã‚«ãƒ¼ D13", perCase: 30, weightCase: 18.0, perPallet: 50, isLong: false },
        { name: "ãƒ¯ãƒ³ã‚¿ãƒƒãƒå·®ç­‹ã‚¢ãƒ³ã‚«ãƒ¼ D16", perCase: 20, weightCase: 25.0, perPallet: 0, isLong: false }
    ];

    // --- åˆæœŸåŒ– & ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ ---
    window.onload = function() {
        renderOptions(productData);
    };

    function switchTab(tabId) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.content-area').forEach(content => content.classList.remove('active'));
        
        event.currentTarget.classList.add('active');
        document.getElementById(tabId).classList.add('active');
    }

    function renderOptions(list) {
        const select = document.getElementById('productSelect');
        select.innerHTML = "";
        
        if (list.length === 0) {
            const option = document.createElement('option');
            option.text = "è©²å½“ãªã—";
            select.appendChild(option);
            return;
        }

        list.forEach((p) => {
            const originalIndex = productData.indexOf(p);
            const option = document.createElement('option');
            option.value = originalIndex;
            option.text = p.name;
            select.appendChild(option);
        });
    }

    function filterProducts() {
        const keyword = document.getElementById('filterInput').value.toLowerCase();
        const filtered = productData.filter(p => p.name.toLowerCase().includes(keyword));
        renderOptions(filtered);
        document.getElementById('resultArea').classList.remove('active');
        document.getElementById('specDisplay').textContent = "å•†å“ã‚’é¸æŠã—ã¦ãã ã•ã„";
    }

    // --- è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ ---
    function calculateLogistics() {
        const index = document.getElementById('productSelect').value;
        const qtyInput = document.getElementById('inputQty').value;
        const resArea = document.getElementById('resultArea');
        const specDisplay = document.getElementById('specDisplay');

        if (index === "" || index === null || qtyInput === "" || qtyInput < 0) {
            resArea.classList.remove('active');
            return;
        }

        const product = productData[index];
        const qty = parseInt(qtyInput);

        // ã‚¹ãƒšãƒƒã‚¯è¡¨ç¤º
        let specText = `è¦æ ¼ï¼š1ã‚±ãƒ¼ã‚¹ ${product.perCase}å…¥ / é‡é‡ ${product.weightCase}kg`;
        if(product.perPallet > 0) {
            specText += ` / 1ãƒ‘ãƒ¬ ${product.perPallet}ã‚±ãƒ¼ã‚¹(å€‹)`;
        } else {
            specText += ` / ç©è¼‰ãƒ‡ãƒ¼ã‚¿ãªã—`;
        }
        specDisplay.textContent = specText;

        // 1. ã‚±ãƒ¼ã‚¹æ•°è¨ˆç®—
        const cases = Math.floor(qty / product.perCase);
        const remainder = qty % product.perCase;
        let caseStr = "";
        
        if (product.perCase === 1) {
            caseStr = `${cases} å€‹(æœ¬/æš)`;
        } else {
            caseStr = `${cases} ã‚±ãƒ¼ã‚¹`;
            if (remainder > 0) {
                caseStr += ` + ãƒãƒ© ${remainder}`;
            }
            if (cases === 0 && remainder === 0) caseStr = "0";
        }

        // 2. é‡é‡è¨ˆç®—
        const weightPerItem = product.weightCase / product.perCase;
        const totalWeight = (qty * weightPerItem);
        const weightStr = `ç´„ ${totalWeight.toFixed(1)} kg`;

        // 3. ãƒ‘ãƒ¬ãƒƒãƒˆè¨ˆç®—
        let palletStr = "";
        
        // ãƒ‘ãƒ¬ãƒƒãƒˆã‚µã‚¤ã‚ºåˆ¤å®š
        let palletType = "é€šå¸¸ (1100Ã—1100)";
        if (product.isLong) {
            palletType = "é•·å°º (900Ã—1800)";
        }

        if (product.perPallet > 0) {
            let loadUnitCount = 0;
            if (product.perCase === 1) {
                loadUnitCount = qty; 
            } else {
                // ãƒãƒ©ãŒå‡ºã‚‹ã¨ãã®åˆ†ã‚‚ã‚¹ãƒšãƒ¼ã‚¹ã‚’å–ã‚‹ãŸã‚åˆ‡ã‚Šä¸Šã’
                loadUnitCount = cases + (remainder > 0 ? 1 : 0);
            }

            const pallets = Math.floor(loadUnitCount / product.perPallet);
            const modUnits = loadUnitCount % product.perPallet; 
            const palletSpace = (loadUnitCount / product.perPallet).toFixed(2);
            
            // ãƒ‘ãƒ¬ãƒƒãƒˆè¨ˆç®—çµæœ
            if (parseFloat(palletSpace) === 0.00) {
                // æ•°é‡0ã®å ´åˆ
                palletStr = `0 PL`;
            } else if (parseFloat(palletSpace) > 0 && parseFloat(palletSpace) < 1.0 && pallets === 0) {
                // 1ãƒ‘ãƒ¬ãƒƒãƒˆæœªæº€ã®å ´åˆ
                palletStr = `0 PL <span class="error-reason">â€»ãƒ‘ãƒ¬ãƒƒãƒˆæœªæº€ (ãƒãƒ©å‡ºè·)</span>`;
                palletStr += `<span class="pallet-note">â€»${palletType}æ›ç®—ã§ç´„ ${palletSpace}æšåˆ†</span>`;
            } else {
                // 1ãƒ‘ãƒ¬ãƒƒãƒˆä»¥ä¸Š
                palletStr = `${pallets} PL`;
                if(modUnits > 0) palletStr += ` + ${modUnits} ç®±(å€‹)`;
                palletStr += `<span class="pallet-note">â€»${palletType}æ›ç®—ã§ç´„ ${palletSpace}æšåˆ†</span>`;
            }

        } else {
            // ãƒ‡ãƒ¼ã‚¿ãªã—ã®å ´åˆ
            palletStr = `0 PL <span class="error-reason">â€»ç©è¼‰ãƒ‡ãƒ¼ã‚¿ãªã— (ãƒã‚¹ã‚¿ãƒ¼æœªç™»éŒ²)</span>`;
        }

        // è¡¨ç¤ºæ›´æ–°
        document.getElementById('resCase').textContent = caseStr;
        document.getElementById('resWeight').textContent = weightStr;
        document.getElementById('resPallet').innerHTML = palletStr;
        
        resArea.classList.add('active');
    }
</script>

</body>
</html>