<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å—ç™ºæ³¨èª²ãƒ„ãƒ¼ãƒ«</title>
<style>
    /* --- å…¨ä½“å…±é€šã‚¹ã‚¿ã‚¤ãƒ« --- */
    :root {
        --primary-color: #0056b3;
        --accent-color: #ff9900;
        --bg-color: #f4f7f9;
        --text-color: #333;
        --border-radius: 8px;
    }
    body { font-family: "Helvetica Neue", Arial, sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; padding: 0; }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
    header { background-color: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000; }
    .nav-tabs { display: flex; justify-content: center; list-style: none; padding: 0; margin: 0; overflow-x: auto; }
    .nav-item { cursor: pointer; padding: 15px 20px; font-weight: bold; color: #666; transition: 0.3s; white-space: nowrap; border-bottom: 4px solid transparent; }
    .nav-item:hover { background-color: #f9f9f9; color: var(--primary-color); }
    .nav-item.active { color: var(--primary-color); border-bottom-color: var(--primary-color); background-color: #fff; }
    .nav-icon { margin-right: 5px; }

    /* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
    .main-wrapper { max-width: 1000px; margin: 20px auto; padding: 0 15px; }
    .app-section { display: none; animation: fadeIn 0.3s ease; }
    .app-section.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

    /* å…±é€šã‚³ãƒ³ãƒ†ãƒŠã‚¹ã‚¿ã‚¤ãƒ« */
    .tool-container { background: #fff; padding: 25px; border-radius: var(--border-radius); box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    h2 { text-align: center; color: #444; margin-bottom: 25px; font-size: 1.4rem; border-bottom: 2px solid #eee; padding-bottom: 10px; }
    
    /* å…±é€šå…¥åŠ›ãƒ‘ãƒ¼ãƒ„ */
    input[type="text"], input[type="number"], input[type="tel"], select, textarea {
        width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; box-sizing: border-box; transition: 0.3s; outline: none;
    }
    input:focus, select:focus, textarea:focus { border-color: var(--primary-color); }
    
    /* ãƒœã‚¿ãƒ³å…±é€š */
    .btn-primary { background-color: var(--primary-color); color: white; border: none; padding: 12px; font-size: 16px; font-weight: bold; border-radius: 6px; cursor: pointer; transition: 0.2s; width: 100%; }
    .btn-primary:hover { opacity: 0.9; transform: translateY(-1px); }
    
    /* --- ã‚¢ãƒ—ãƒª1ï¼šå•†å“ãƒªã‚µãƒ¼ãƒç”¨ --- */
    .search-box { position: relative; margin-bottom: 20px; }
    .search-settings { font-size: 0.9em; margin-top: 15px; }
    .search-settings label { margin-right: 15px; cursor: pointer; display: inline-flex; align-items: center; gap: 4px; }
    .search-note { color: #d9534f; font-size: 0.85em; margin-top: 15px; text-align: center; background: #fff5f5; padding: 10px; border-radius: 4px; border: 1px dashed #d9534f; }
    .shortcut-tip { text-align: center; margin-top: 10px; font-size: 0.9em; color: #666; }
    .shortcut-key { background-color: #eee; padding: 2px 6px; border-radius: 4px; border: 1px solid #ccc; font-weight: bold; font-family: monospace; }

    /* --- ã‚¢ãƒ—ãƒª2ï¼šå®šä¾¡è¨ˆç®—ç”¨ --- */
    .calc-row { display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 15px; background: #f8fbff; padding: 15px; border-radius: 8px; }
    .calc-col { flex: 1; min-width: 200px; }
    .calc-label { font-weight: bold; display: block; margin-bottom: 5px; font-size: 0.9em; }
    .preset-group { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 5px; }
    .btn-preset { background: #fff; border: 1px solid #cbd5e0; padding: 4px 10px; border-radius: 20px; font-size: 0.8em; cursor: pointer; }
    .btn-preset.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }
    .calc-area { display: flex; gap: 20px; align-items: stretch; }
    .calc-box { flex: 1; display: flex; flex-direction: column; }
    .calc-textarea { height: 400px; font-family: monospace; resize: vertical; }
    #outputArea { background-color: #f0fff4; border-color: #c3e6cb; color: #155724; font-weight: bold; }

    /* --- ã‚¢ãƒ—ãƒª3ï¼šå˜ä½å¤‰æ›ç”¨ --- */
    .unit-tabs { display: flex; background: #eee; border-radius: 6px 6px 0 0; overflow: hidden; margin-bottom: 20px; }
    .unit-tab { flex: 1; padding: 10px; text-align: center; cursor: pointer; color: #777; transition: 0.3s; font-weight: bold; }
    .unit-tab.active { background: #fff; color: #e67e22; border-bottom: 3px solid #e67e22; }
    .unit-content { display: none; }
    .unit-content.active { display: block; }
    .unit-group { position: relative; margin-bottom: 15px; }
    .unit-label { position: absolute; right: 15px; top: 14px; color: #888; font-weight: bold; pointer-events: none; }
    .unit-input { padding-right: 50px !important; text-align: right; }
    .quick-buttons { display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; }
    .q-btn { background: #f0f4f8; border: 1px solid #dce6f1; padding: 6px 12px; border-radius: 20px; font-size: 0.85em; cursor: pointer; color: #2c3e50; }
    .q-btn:hover { background: #e67e22; color: white; border-color: #e67e22; }
    .unit-equals { text-align: center; font-size: 20px; color: #e67e22; margin: -5px 0 10px; }
    .unit-memo { font-size: 0.85em; color: #666; background: #fdfdfd; padding: 10px; border-radius: 4px; margin-top: 15px; border: 1px solid #eee; }

    /* --- ã‚¢ãƒ—ãƒª4ï¼šé›»è©±ãƒ¡ãƒ¢ç”¨ --- */
    .badge-required { background: #ff4d4d; color: white; padding: 2px 6px; border-radius: 4px; font-size: 0.7em; vertical-align: middle; margin-left: 5px; }
    .action-group { display: flex; gap: 10px; flex-wrap: wrap; }
    .action-group label { flex: 1; min-width: 140px; cursor: pointer; }
    .action-group input[type="radio"] { display: none; }
    .action-btn { display: block; text-align: center; padding: 10px; border: 1px solid #ddd; border-radius: 6px; background: #f9f9f9; transition: all 0.2s; font-size: 0.9em; }
    .action-group input[type="radio"]:checked + .action-btn { background-color: #e7f1ff; border-color: var(--primary-color); color: var(--primary-color); font-weight: bold; }
    .preview-box { background-color: #333; color: #fff; padding: 15px; border-radius: 6px; margin-top: 20px; }
    #resultMemo { width: 100%; height: 150px; background: transparent; border: none; color: #fff; font-family: monospace; font-size: 14px; resize: none; overflow: auto; outline: none; }
    #toast { visibility: hidden; min-width: 250px; margin-left: -125px; background-color: #333; color: #fff; text-align: center; border-radius: 2px; padding: 16px; position: fixed; z-index: 2000; left: 50%; bottom: 30px; }
    #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
    @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
    @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }

    /* --- ã‚¬ã‚¤ãƒ‰ã‚¿ãƒ–ç”¨ã‚¹ã‚¿ã‚¤ãƒ« --- */
    .guide-box { border-left: 5px solid #ccc; padding-left: 15px; margin-bottom: 30px; }
    .guide-title { font-size: 1.2em; font-weight: bold; color: #333; display: flex; align-items: center; margin-bottom: 10px; }
    .guide-icon { font-size: 1.4em; margin-right: 10px; }
    .guide-desc { font-size: 0.95em; line-height: 1.6; color: #555; margin-bottom: 10px; }
    .guide-point { background-color: #fff9e6; border-radius: 8px; padding: 12px; font-size: 0.9em; color: #665c3d; border: 1px solid #f0e6c8; }
    .guide-badge { display: inline-block; padding: 2px 8px; border-radius: 12px; font-size: 0.8em; color: #fff; margin-right: 8px; vertical-align: middle; }
</style>
</head>
<body>

<header>
    <ul class="nav-tabs">
        <li class="nav-item active" onclick="switchApp('app-search')"><span class="nav-icon">ğŸš€</span>ä¸€æ‹¬ãƒªã‚µãƒ¼ãƒ</li>
        <li class="nav-item" onclick="switchApp('app-calc')"><span class="nav-icon">ğŸ§®</span>å®šä¾¡Ã—æ›ã‘ç‡</li>
        <li class="nav-item" onclick="switchApp('app-unit')"><span class="nav-icon">ğŸ“</span>å˜ä½å¤‰æ›</li>
        <li class="nav-item" onclick="switchApp('app-memo')"><span class="nav-icon">ğŸ“</span>é›»è©±ãƒ¡ãƒ¢</li>
        <li class="nav-item" onclick="switchApp('app-guide')"><span class="nav-icon">ğŸ“–</span>ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</li>
    </ul>
</header>

<div class="main-wrapper">

    <section id="app-search" class="app-section active">
        <div class="tool-container" style="border-top: 5px solid #ff9900;">
            <h2>å•†å“ä¸€æ‹¬ãƒªã‚µãƒ¼ãƒ</h2>
            <div class="search-box">
                <input type="text" id="keyword" placeholder="å‹ç•ªãƒ»å•†å“åã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šHYT-4Lï¼‰" onkeypress="handleEnterSearch(event)">
            </div>
            
            <button class="btn-primary" style="background-color: #ff9900;" onclick="multiSearch()">ã¾ã¨ã‚ã¦æ¤œç´¢é–‹å§‹ï¼</button>

            <div class="search-settings">
                <div style="margin-bottom:5px; font-weight:bold;">æ¤œç´¢å¯¾è±¡ã‚µã‚¤ãƒˆï¼š</div>
                <div id="checkboxArea"></div>
            </div>

            <div class="shortcut-tip">
                ğŸ’¡ é–‹ã„ãŸã‚¿ãƒ–ã¯ <span class="shortcut-key">Ctrl</span> + <span class="shortcut-key">W</span> ã§é–‰ã˜ã‚‰ã‚Œã¾ã™
            </div>
            <div class="search-note">
                âš ï¸ åˆå›ã®ã¿ã€Œãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€ã¨å‡ºã¾ã™ã€‚<br>
                ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼å³ç«¯ã®ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰<strong>ã€Œå¸¸ã«è¨±å¯ã€</strong>ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚
            </div>
        </div>
    </section>

    <section id="app-calc" class="app-section">
        <div class="tool-container" style="border-top: 5px solid #0056b3;">
            <h2>å®šä¾¡Ã—æ›ã‘ç‡ è¨ˆç®—æ©Ÿ</h2>
            
            <div class="calc-row">
                <div class="calc-col">
                    <span class="calc-label">æ›ã‘ç‡ï¼ˆï¼…ï¼‰</span>
                    <input type="number" id="multiplier" value="70" step="0.1" oninput="handleInputMultiplier()">
                    <div class="preset-group">
                        <button class="btn-preset" onclick="setMultiplier(50)">50%</button>
                        <button class="btn-preset" onclick="setMultiplier(55)">55%</button>
                        <button class="btn-preset" onclick="setMultiplier(60)">60%</button>
                        <button class="btn-preset" onclick="setMultiplier(65)">65%</button>
                        <button class="btn-preset" onclick="setMultiplier(70)">70%</button>
                    </div>
                </div>
                <div class="calc-col">
                    <span class="calc-label">ç«¯æ•°å‡¦ç†ãƒ»ç¨</span>
                    <select id="roundingMode" onchange="calculatePrice()">
                        <option value="floor" selected>åˆ‡ã‚Šæ¨ã¦ (æ¨å¥¨)</option>
                        <option value="round">å››æ¨äº”å…¥</option>
                        <option value="ceil">åˆ‡ã‚Šä¸Šã’</option>
                    </select>
                    <div style="margin-top:10px;">
                        <label style="cursor:pointer; display:flex; align-items:center; font-size:0.9em; font-weight:bold;">
                            <input type="checkbox" id="checkTax" onchange="calculatePrice()" style="width:auto; margin-right:8px;">
                            ç¨è¾¼ä¾¡æ ¼ã«ã™ã‚‹ (Ã—1.10)
                        </label>
                    </div>
                </div>
            </div>

            <div class="calc-area">
                <div class="calc-box">
                    <span class="calc-label">ã€å…¥åŠ›ã€‘å®šä¾¡ãƒªã‚¹ãƒˆ <span id="countInput" style="font-weight:normal; font-size:0.8em; background:#eee; padding:2px 5px; border-radius:4px;">0è¡Œ</span></span>
                    <textarea id="inputArea" class="calc-textarea" placeholder="Excelã‹ã‚‰è²¼ã‚Šä»˜ã‘&#13;10,000&#13;15800" oninput="calculatePrice()"></textarea>
                </div>
                <div style="display:flex; align-items:center; color:#ccc; font-size:24px;">â¡</div>
                <div class="calc-box">
                    <span class="calc-label">ã€çµæœã€‘è¨ˆç®—å¾Œä¾¡æ ¼ <span id="countOutput" style="font-weight:normal; font-size:0.8em; background:#eee; padding:2px 5px; border-radius:4px;">0è¡Œ</span></span>
                    <textarea id="outputArea" class="calc-textarea" readonly></textarea>
                </div>
            </div>
            
            <button class="btn-primary" style="margin-top:15px; background-color:#28a745;" onclick="copyPriceResult()">ğŸ“‹ çµæœã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
        </div>
    </section>

    <section id="app-unit" class="app-section">
        <div class="tool-container" style="max-width: 600px; margin: 0 auto; border-top: 5px solid #e67e22;">
            <h2>å»ºæå˜ä½ å¤‰æ›ãã‚“</h2>

            <div class="unit-tabs">
                <div class="unit-tab active" onclick="switchUnitTab('tab-length', this)">é•·ã• (å°ºãƒ»é–“)</div>
                <div class="unit-tab" onclick="switchUnitTab('tab-area', this)">åºƒã• (åªãƒ»å¹³ç±³)</div>
            </div>

            <div id="tab-length" class="unit-content active">
                <div class="quick-buttons">
                    <button class="q-btn" onclick="setLength(1)">1å°º (ã‚µã‚·ã‚¬ãƒ)</button>
                    <button class="q-btn" onclick="setLength(6)">1é–“ (1820)</button>
                    <button class="q-btn" onclick="setLength(3)">3å°º (910)</button>
                </div>
                <div class="unit-group">
                    <input type="number" id="inputShaku" class="unit-input" placeholder="ä¾‹: 6" oninput="calcFromShaku()">
                    <span class="unit-label">å°º</span>
                </div>
                <div class="unit-equals">â‡…</div>
                <div class="unit-group">
                    <input type="number" id="inputMm" class="unit-input" placeholder="ä¾‹: 1818" oninput="calcFromMm()">
                    <span class="unit-label">mm</span>
                </div>
                <div class="unit-memo">
                    <strong>ğŸ’¡ é•·ã•ãƒ¡ãƒ¢</strong><br>
                    1å°º â‰’ 303mm / 3å°º(åŠé–“) â‰’ 910mm / 6å°º(1é–“) â‰’ 1820mm
                </div>
            </div>

            <div id="tab-area" class="unit-content">
                <div class="quick-buttons">
                    <button class="q-btn" onclick="setArea(1)">1åª (ã‚µãƒ–ãƒ­ã‚¯2æš)</button>
                    <button class="q-btn" onclick="setArea(30)">30åª (æˆ¸å»º)</button>
                </div>
                <div class="unit-group">
                    <input type="number" id="inputTsubo" class="unit-input" placeholder="ä¾‹: 10" oninput="calcFromTsubo()">
                    <span class="unit-label">åª</span>
                </div>
                <div class="unit-equals">â‡…</div>
                <div class="unit-group">
                    <input type="number" id="inputM2" class="unit-input" placeholder="ä¾‹: 33.1" oninput="calcFromM2()">
                    <span class="unit-label">mÂ²</span>
                </div>
                <div class="unit-group">
                    <input type="number" id="inputTatami" class="unit-input" placeholder="ä¾‹: 20" oninput="calcFromTatami()">
                    <span class="unit-label">å¸–</span>
                </div>
                <div class="unit-memo">
                    <strong>ğŸ’¡ åºƒã•ãƒ¡ãƒ¢</strong><br>
                    1åª â‰’ 3.3mÂ² (ç•³2æšåˆ†) / 1åª ï¼ ã‚µãƒ–ãƒ­ã‚¯æ¿(3Ã—6) 2æšåˆ†
                </div>
            </div>

            <button class="btn-primary" style="margin-top:20px; background-color:#95a5a6;" onclick="clearUnitInputs()">ã‚¯ãƒªã‚¢</button>
        </div>
    </section>

    <section id="app-memo" class="app-section">
        <div class="tool-container" style="max-width: 600px; margin: 0 auto; border-top: 5px solid #0056b3;">
            <h2>å—é›»ãƒ¡ãƒ¢ä½œæˆ</h2>
            <div style="margin-bottom:15px;">
                <label class="calc-label">å—é›»æ—¥æ™‚</label>
                <input type="text" id="memoTime" oninput="updateMemoPreview()">
            </div>
            <div style="margin-bottom:15px;">
                <label class="calc-label">ç›¸æ‰‹ã®ä¼šç¤¾åãƒ»æ°å <span class="badge-required">å¿…é ˆ</span></label>
                <input type="text" id="memoClient" placeholder="ä¾‹ï¼šã€‡ã€‡å•†äº‹ ç”°ä¸­æ§˜" oninput="updateMemoPreview()">
            </div>
            <div style="margin-bottom:15px;">
                <label class="calc-label">ç›¸æ‰‹ã®é›»è©±ç•ªå·</label>
                <input type="tel" id="memoPhone" placeholder="æŠ˜ã‚Šè¿”ã—ãŒå¿…è¦ãªå ´åˆã«å…¥åŠ›" oninput="updateMemoPreview()">
            </div>
            <div style="margin-bottom:15px;">
                <label class="calc-label">ç”¨ä»¶ãƒ»ä¼è¨€å†…å®¹</label>
                <textarea id="memoBody" style="height:80px;" placeholder="ä¾‹ï¼šè¦‹ç©æ›¸ã®ä»¶ã§ç¢ºèªã—ãŸã„ç‚¹ãŒã‚ã‚‹ãã†ã§ã™ã€‚" oninput="updateMemoPreview()"></textarea>
            </div>
            <div style="margin-bottom:15px;">
                <label class="calc-label">å¯¾å¿œä¾é ¼ï¼ˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰</label>
                <div class="action-group">
                    <label><input type="radio" name="actionType" value="æŠ˜ã‚Šè¿”ã—ãŠé¡˜ã„ã—ã¾ã™" checked onchange="updateMemoPreview()"><span class="action-btn">ğŸ“ æŠ˜ã‚Šè¿”ã—è¦</span></label>
                    <label><input type="radio" name="actionType" value="ä¼è¨€ã®ã¿ï¼ˆæŠ˜ã‚Šè¿”ã—ä¸è¦ï¼‰" onchange="updateMemoPreview()"><span class="action-btn">âœ‰ï¸ ä¼è¨€ã®ã¿</span></label>
                    <label><input type="radio" name="actionType" value="å†åº¦é›»è©±ã‚ã‚Šã¾ã™" onchange="updateMemoPreview()"><span class="action-btn">ğŸ”„ ã¾ãŸæ›ã‹ã£ã¦ãã¾ã™</span></label>
                </div>
            </div>

            <div class="preview-box">
                <div style="font-size:0.8em; color:#aaa; margin-bottom:5px;">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆã“ã‚Œã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ï¼‰</div>
                <textarea id="resultMemo" readonly></textarea>
            </div>
            
            <button class="btn-primary" onclick="copyMemoResult()">ğŸ“‹ ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
        </div>
    </section>

    <section id="app-guide" class="app-section">
        <div class="tool-container" style="border-top: 5px solid #888;">
            <h2>ğŸ“– ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰</h2>
            
            <p style="text-align:center; margin-bottom:30px;">
                æ¯æ—¥ã®æ¥­å‹™ãŠç–²ã‚Œæ§˜ã§ã™ï¼<br>
                ã“ã®ãƒ„ãƒ¼ãƒ«ã‚»ãƒƒãƒˆã¯ã€æ—¥ã€…ã®ã€Œã¡ã‚‡ã£ã¨é¢å€’ãªä½œæ¥­ã€ã‚’æ¥½ã«ã™ã‚‹ãŸã‚ã«ä½œã‚‰ã‚Œã¾ã—ãŸã€‚<br>
                ãã‚Œãã‚Œã®ä¾¿åˆ©æ©Ÿèƒ½ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚
            </p>

            <div class="guide-box" style="border-color: #ff9900;">
                <div class="guide-title">
                    <span class="guide-badge" style="background:#ff9900;">ãƒªã‚µãƒ¼ãƒ</span>
                    å•†å“ä¸€æ‹¬ãƒªã‚µãƒ¼ãƒ
                </div>
                <div class="guide-desc">
                    å‹ç•ªã‚„å•†å“åã‚’å…¥ã‚Œã‚‹ã ã‘ã§ã€Googleãƒ»ç”»åƒæ¤œç´¢ãƒ»ãƒˆãƒ©ã‚¹ã‚³ãƒ»MonotaROãªã©ã‚’<strong>ä¸€åº¦ã«ã¾ã¨ã‚ã¦æ¤œç´¢</strong>ã§ãã¾ã™ã€‚
                    ã‚¿ãƒ–ã‚’è¡Œã£ãŸã‚Šæ¥ãŸã‚Šã—ã¦ã€ä½•åº¦ã‚‚ã‚³ãƒ”ãƒšã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
                </div>
                <div class="guide-point">
                    âš ï¸ <strong>æœ€åˆã®1å›ã ã‘æ³¨æ„ï¼</strong><br>
                    ã€Œãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€ã¨è¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã®å³ç«¯ã®ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰ã€Œå¸¸ã«è¨±å¯ã€ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚ã“ã‚Œã§æ¬¡ã‹ã‚‰ã¯ä¸€ç¬ã§å…¨éƒ¨é–‹ãã¾ã™ï¼
                </div>
            </div>

            <div class="guide-box" style="border-color: #0056b3;">
                <div class="guide-title">
                    <span class="guide-badge" style="background:#0056b3;">è¨ˆç®—</span>
                    å®šä¾¡Ã—æ›ã‘ç‡ è¨ˆç®—æ©Ÿ
                </div>
                <div class="guide-desc">
                    Excelã®è¦‹ç©ãƒªã‚¹ãƒˆãªã©ã‹ã‚‰ã€Œå®šä¾¡ã€ã®åˆ—ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è²¼ã‚Šä»˜ã‘ã‚‹ã ã‘ã§ã€ä¸€æ°—ã«ä»•åˆ‡ã‚Šä¾¡æ ¼ã‚’è¨ˆç®—ã—ã¾ã™ã€‚<br>
                    é›»å“ã§ä¸€ã¤ãšã¤è¨ˆç®—ã—ãªãã¦OKï¼ã€Œ50%ã€ã€Œ70%ã€ãªã©ã®ãƒœã‚¿ãƒ³ã§ã™ãåˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚
                </div>
                <div class="guide-point">
                    ğŸ’¡ <strong>ã“ã“ãŒä¾¿åˆ©</strong><br>
                    ã€Œç¨è¾¼ã¿è¨ˆç®—ã€ã‚„ã€Œç«¯æ•°å‡¦ç†ï¼ˆåˆ‡ã‚Šæ¨ã¦ãªã©ï¼‰ã€ã‚‚è¨­å®šã§ãã‚‹ã®ã§ã€ãŠå®¢æ§˜ã¸ã®æç¤ºä¾¡æ ¼ä½œã‚Šã«ã‚‚ãã®ã¾ã¾ä½¿ãˆã¾ã™ã€‚
                </div>
            </div>

            <div class="guide-box" style="border-color: #e67e22;">
                <div class="guide-title">
                    <span class="guide-badge" style="background:#e67e22;">å¤‰æ›</span>
                    å»ºæå˜ä½ å¤‰æ›ãã‚“
                </div>
                <div class="guide-desc">
                    å›³é¢ã‚„ç¾å ´ã®è©±ã§å‡ºã¦ãã‚‹ã€Œå°ºï¼ˆã—ã‚ƒãï¼‰ã€ã‚„ã€Œé–“ï¼ˆã‘ã‚“ï¼‰ã€ã€ã€Œåªï¼ˆã¤ã¼ï¼‰ã€ã€‚<br>
                    ã€Œã“ã‚Œã£ã¦ä½•ãƒŸãƒªï¼Ÿä½•å¹³ç±³ï¼Ÿã€ã¨æ€ã£ãŸã‚‰ã“ã“ã«å…¥åŠ›ï¼ã™ãã«è¦‹æ…£ã‚ŒãŸå˜ä½ï¼ˆmmã‚„ã¡ï¼‰ã«å¤‰æ›ã—ã¾ã™ã€‚
                </div>
                <div class="guide-point">
                    ğŸ’¡ <strong>é€†ç®—ã‚‚ã§ãã¾ã™</strong><br>
                    ã€Œ3000mmã£ã¦ä½•å°ºï¼Ÿã€ã¨èã‹ã‚ŒãŸæ™‚ã‚‚ã€mmæ¬„ã«å…¥åŠ›ã™ã‚Œã°å°ºã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚
                </div>
            </div>

            <div class="guide-box" style="border-color: #333;">
                <div class="guide-title">
                    <span class="guide-badge" style="background:#333;">ãƒ¡ãƒ¢</span>
                    å—é›»ãƒ¡ãƒ¢ä½œæˆ
                </div>
                <div class="guide-desc">
                    é›»è©±ã‚’å—ã‘ãªãŒã‚‰å…¥åŠ›ã—ã¦ã€æœ€å¾Œã«ã€Œã‚³ãƒ”ãƒ¼ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã ã‘ã€‚<br>
                    ãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ï¼ˆTeamsã‚„LINE WORKSãªã©ï¼‰ã«è¦‹ã‚„ã™ã„å½¢ã§è²¼ã‚Šä»˜ã‘ã‚‰ã‚Œã¾ã™ã€‚<br>
                    ã€ŒæŠ˜ã‚Šè¿”ã—ãŠé¡˜ã„ã—ã¾ã™ã€ãªã©ã®æ–‡è¨€ã‚‚ãƒœã‚¿ãƒ³ä¸€ã¤ã§é¸ã¹ã¾ã™ã€‚
                </div>
            </div>

        </div>
    </section>

</div>
<div id="toast">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</div>

<script>
    // --- åˆæœŸåŒ–å‡¦ç† ---
    window.onload = function() {
        // 1. å•†å“ãƒªã‚µãƒ¼ãƒã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç”Ÿæˆ
        initSearchCheckboxes();
        document.getElementById('keyword').focus();

        // 2. å®šä¾¡è¨ˆç®—ã®åˆæœŸåŒ–
        handleInputMultiplier();

        // 3. é›»è©±ãƒ¡ãƒ¢ã®æ—¥æ™‚ã‚»ãƒƒãƒˆ
        const now = new Date();
        const str = `${now.getMonth() + 1}/${now.getDate()} ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
        document.getElementById('memoTime').value = str;
        updateMemoPreview();
    };

    // --- ã‚¢ãƒ—ãƒªåˆ‡ã‚Šæ›¿ãˆãƒ­ã‚¸ãƒƒã‚¯ ---
    function switchApp(appId) {
        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ‡ã‚Šæ›¿ãˆ
        document.querySelectorAll('.app-section').forEach(sec => sec.classList.remove('active'));
        document.getElementById(appId).classList.add('active');

        // ã‚¿ãƒ–ã®è¦‹ãŸç›®åˆ‡ã‚Šæ›¿ãˆ
        const navItems = document.querySelectorAll('.nav-item');
        navItems.forEach(item => item.classList.remove('active'));
        
        // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹ï¼ˆç°¡æ˜“çš„ãªåˆ¤å®šï¼‰
        event.currentTarget.classList.add('active');
    }

    // ==========================================
    // ã‚¢ãƒ—ãƒª1ï¼šå•†å“ãƒªã‚µãƒ¼ãƒç”¨ ãƒ­ã‚¸ãƒƒã‚¯
    // ==========================================
    const searchTargets = [
        { id: "google", name: "Google æ¤œç´¢", url: "https://www.google.com/search?q=", checked: true },
        { id: "image", name: "Google ç”»åƒ", url: "https://www.google.com/search?tbm=isch&q=", checked: true },
        { id: "trusco", name: "ãƒˆãƒ©ã‚¹ã‚³ (Orange)", url: "https://www.orange-book.com/ja/c/search/result.html?q=", checked: true },
        { id: "monotaro", name: "MonotaRO", url: "https://www.monotaro.com/s/?q=", checked: true },
        { id: "amazon", name: "Amazon", url: "https://www.amazon.co.jp/s?k=", checked: false },
        { id: "rakuten", name: "æ¥½å¤©å¸‚å ´", url: "https://search.rakuten.co.jp/search/mall/", checked: false }
    ];

    function initSearchCheckboxes() {
        const area = document.getElementById('checkboxArea');
        searchTargets.forEach(site => {
            const label = document.createElement('label');
            const checkbox = document.createElement('input');
            checkbox.type = "checkbox";
            checkbox.id = "check_" + site.id;
            checkbox.checked = site.checked;
            label.appendChild(checkbox);
            label.appendChild(document.createTextNode(site.name));
            area.appendChild(label);
        });
    }

    function multiSearch() {
        const keyword = document.getElementById('keyword').value.trim();
        if (!keyword) { alert("ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"); return; }
        const encoded = encodeURIComponent(keyword);
        let count = 0;
        searchTargets.forEach(site => {
            const cb = document.getElementById("check_" + site.id);
            if (cb && cb.checked) {
                window.open(site.url + encoded, '_blank');
                count++;
            }
        });
        if (count === 0) alert("æ¤œç´¢ã‚µã‚¤ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„");
    }

    function handleEnterSearch(e) { if(e.key === 'Enter') multiSearch(); }


    // ==========================================
    // ã‚¢ãƒ—ãƒª2ï¼šå®šä¾¡è¨ˆç®—ç”¨ ãƒ­ã‚¸ãƒƒã‚¯
    // ==========================================
    function setMultiplier(val) {
        document.getElementById('multiplier').value = val;
        handleInputMultiplier();
    }
    function handleInputMultiplier() {
        const val = document.getElementById('multiplier').value;
        document.querySelectorAll('.btn-preset').forEach(btn => {
            if (btn.textContent.replace('%','') == val) btn.classList.add('active');
            else btn.classList.remove('active');
        });
        calculatePrice();
    }
    function calculatePrice() {
        const input = document.getElementById('inputArea').value;
        const mult = parseFloat(document.getElementById('multiplier').value) || 0;
        const mode = document.getElementById('roundingMode').value;
        const isTax = document.getElementById('checkTax').checked;

        const lines = input.split('\n');
        document.getElementById('countInput').textContent = lines.length + "è¡Œ";
        document.getElementById('countOutput').textContent = lines.length + "è¡Œ";

        const results = lines.map(line => {
            let clean = line.replace(/[^\d.]/g, '');
            if (!clean) return "";
            let price = parseFloat(clean);
            if (isNaN(price)) return "";
            
            let final = price * (mult / 100);
            if (isTax) final *= 1.10;
            
            if (mode === 'floor') final = Math.floor(final);
            else if (mode === 'round') final = Math.round(final);
            else if (mode === 'ceil') final = Math.ceil(final);
            
            return final.toLocaleString();
        });
        document.getElementById('outputArea').value = results.join('\n');
    }
    function copyPriceResult() {
        copyToClipboard(document.getElementById('outputArea').value);
    }


    // ==========================================
    // ã‚¢ãƒ—ãƒª3ï¼šå˜ä½å¤‰æ›ç”¨ ãƒ­ã‚¸ãƒƒã‚¯
    // ==========================================
    const SHAKU_MM = 303.0303;
    const TSUBO_M2 = 3.305785;
    const TATAMI_M2 = 1.6562;

    function switchUnitTab(targetId, tabEl) {
        document.querySelectorAll('.unit-content').forEach(c => c.classList.remove('active'));
        document.getElementById(targetId).classList.add('active');
        document.querySelectorAll('.unit-tab').forEach(t => t.classList.remove('active'));
        tabEl.classList.add('active');
    }

    function calcFromShaku() {
        const val = parseFloat(document.getElementById('inputShaku').value);
        if(isNaN(val)) { document.getElementById('inputMm').value = ''; return; }
        document.getElementById('inputMm').value = (val * SHAKU_MM).toFixed(1);
    }
    function calcFromMm() {
        const val = parseFloat(document.getElementById('inputMm').value);
        if(isNaN(val)) { document.getElementById('inputShaku').value = ''; return; }
        document.getElementById('inputShaku').value = (val / SHAKU_MM).toFixed(3);
    }
    function setLength(val) {
        document.getElementById('inputShaku').value = val;
        calcFromShaku();
    }

    function calcFromTsubo() {
        const val = parseFloat(document.getElementById('inputTsubo').value);
        if(isNaN(val)) { 
            document.getElementById('inputM2').value = ''; 
            document.getElementById('inputTatami').value = ''; return; 
        }
        document.getElementById('inputM2').value = (val * TSUBO_M2).toFixed(2);
        document.getElementById('inputTatami').value = (val * 2).toFixed(1);
    }
    function calcFromM2() {
        const val = parseFloat(document.getElementById('inputM2').value);
        if(isNaN(val)) {
            document.getElementById('inputTsubo').value = ''; 
            document.getElementById('inputTatami').value = ''; return;
        }
        document.getElementById('inputTsubo').value = (val / TSUBO_M2).toFixed(2);
        document.getElementById('inputTatami').value = (val / TATAMI_M2).toFixed(1);
    }
    function calcFromTatami() {
        const val = parseFloat(document.getElementById('inputTatami').value);
        if(isNaN(val)) {
            document.getElementById('inputTsubo').value = ''; 
            document.getElementById('inputM2').value = ''; return;
        }
        document.getElementById('inputM2').value = (val * TATAMI_M2).toFixed(2);
        document.getElementById('inputTsubo').value = (val / 2).toFixed(2);
    }
    function setArea(val) {
        document.getElementById('inputTsubo').value = val;
        calcFromTsubo();
    }
    function clearUnitInputs() {
        const inputs = document.getElementById('app-unit').querySelectorAll('input');
        inputs.forEach(i => i.value = '');
    }

    // ==========================================
    // ã‚¢ãƒ—ãƒª4ï¼šé›»è©±ãƒ¡ãƒ¢ç”¨ ãƒ­ã‚¸ãƒƒã‚¯
    // ==========================================
    function updateMemoPreview() {
        const dt = document.getElementById('memoTime').value;
        const cl = document.getElementById('memoClient').value || 'ï¼ˆç›¸æ‰‹åæœªå…¥åŠ›ï¼‰';
        const ph = document.getElementById('memoPhone').value;
        const bd = document.getElementById('memoBody').value || 'ç‰¹ã«ãªã—';
        
        let act = '';
        const radios = document.getElementsByName('actionType');
        for(let r of radios) if(r.checked) act = r.value;

        const phLine = ph ? `â– é€£çµ¡å…ˆï¼š${ph}\n` : '';
        const res = `ã€é›»è©±ãƒ¡ãƒ¢ã€‘\nâ– æ—¥æ™‚ã€€ï¼š${dt}\nâ– ç›¸æ‰‹ã€€ï¼š${cl}\n${phLine}â– ç”¨ä»¶\n${bd}\n\n-------------------------\nâ˜…å¯¾å¿œï¼š${act}`;
        document.getElementById('resultMemo').value = res;
    }
    function copyMemoResult() {
        copyToClipboard(document.getElementById('resultMemo').value);
    }

    // --- å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ---
    function copyToClipboard(text) {
        if (!text) { alert("å†…å®¹ãŒç©ºã§ã™"); return; }
        navigator.clipboard.writeText(text).then(() => {
            const t = document.getElementById("toast");
            t.className = "show";
            setTimeout(() => { t.className = t.className.replace("show", ""); }, 3000);
        });
    }
</script>

</body>
</html>