<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹¤å‹™ãƒ»å‡ºå¼µç®¡ç†ãƒ„ãƒ¼ãƒ«</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0f1419;
            --bg-secondary: #1a1f26;
            --bg-card: #242b33;
            --bg-hover: #2d353f;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-purple: #8b5cf6;
            --accent-red: #ef4444;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--border);
        }

        h1 {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        h1::before {
            content: 'ğŸ“Š';
        }

        .month-selector {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .month-selector button {
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.2s;
        }

        .month-selector button:hover {
            background: var(--bg-hover);
            border-color: var(--accent-blue);
        }

        .month-selector span {
            font-size: 1.1rem;
            font-weight: 500;
            min-width: 120px;
            text-align: center;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .tab:hover {
            background: var(--bg-hover);
        }

        .tab.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: white;
        }

        .panel {
            display: none;
        }

        .panel.active {
            display: block;
        }

        /* ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .summary-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .summary-card .label {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .summary-card .value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .summary-card .unit {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-left: 4px;
        }

        .summary-card.blue .value { color: var(--accent-blue); }
        .summary-card.green .value { color: var(--accent-green); }
        .summary-card.orange .value { color: var(--accent-orange); }
        .summary-card.purple .value { color: var(--accent-purple); }
        .summary-card.red .value { color: var(--accent-red); }

        /* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ */
        .calendar {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-bottom: 8px;
        }

        .calendar-header span {
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-muted);
            padding: 8px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
            position: relative;
            min-height: 50px;
        }

        .calendar-day:hover {
            background: var(--bg-hover);
        }

        .calendar-day.empty {
            cursor: default;
        }

        .calendar-day.today {
            border: 2px solid var(--accent-blue);
        }

        .calendar-day .date {
            font-weight: 500;
        }

        .calendar-day .type-badge {
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 4px;
            margin-top: 2px;
        }

        .calendar-day.office { background: rgba(59, 130, 246, 0.2); }
        .calendar-day.office .type-badge { background: var(--accent-blue); }

        .calendar-day.remote { background: rgba(16, 185, 129, 0.2); }
        .calendar-day.remote .type-badge { background: var(--accent-green); }

        .calendar-day.trip { background: rgba(245, 158, 11, 0.2); }
        .calendar-day.trip .type-badge { background: var(--accent-orange); }

        .calendar-day.paid-leave { background: rgba(139, 92, 246, 0.2); }
        .calendar-day.paid-leave .type-badge { background: var(--accent-purple); }

        .calendar-day.saturday .date { color: #60a5fa; }
        .calendar-day.sunday .date { color: #f87171; }
        .calendar-day.holiday .date { color: #f87171; }
        .calendar-day.holiday::after {
            content: 'ç¥';
            position: absolute;
            top: 2px;
            right: 4px;
            font-size: 0.5rem;
            color: #f87171;
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ  */
        .form-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .form-section h2 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .form-group label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group select {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 12px;
            color: var(--text-primary);
            font-size: 0.9rem;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--accent-blue);
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--bg-hover);
        }

        .btn-danger {
            background: var(--accent-red);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        /* å±¥æ­´ãƒªã‚¹ãƒˆ */
        .history-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .history-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .history-item:hover {
            border-color: var(--accent-blue);
            background: var(--bg-hover);
        }

        /* çµŒè²»ãƒ†ãƒ¼ãƒ–ãƒ« */
        .expense-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .expense-table th,
        .expense-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .expense-table th {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .expense-table td {
            font-size: 0.9rem;
        }

        .expense-table .amount {
            font-family: 'JetBrains Mono', monospace;
            text-align: right;
        }

        .expense-table .delete-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .expense-table .delete-btn:hover {
            color: var(--accent-red);
            background: rgba(239, 68, 68, 0.1);
        }

        /* åˆ¤æ–­ãƒ•ãƒ­ãƒ¼ */
        .flow-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .flow-question {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 20px;
        }

        .flow-options {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .flow-option {
            padding: 12px 24px;
            background: var(--bg-secondary);
            border: 2px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.95rem;
        }

        .flow-option:hover {
            border-color: var(--accent-blue);
        }

        .flow-option.selected {
            border-color: var(--accent-blue);
            background: rgba(59, 130, 246, 0.1);
        }

        .flow-result {
            margin-top: 24px;
            padding: 20px;
            border-radius: 12px;
            font-size: 1rem;
        }

        .flow-result.recommend {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--accent-green);
        }

        .flow-result.not-recommend {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--accent-orange);
        }

        .flow-result h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .flow-result.recommend h3 { color: var(--accent-green); }
        .flow-result.not-recommend h3 { color: var(--accent-orange); }

        /* ã‚³ã‚¹ãƒˆæ¯”è¼ƒ */
        .cost-compare {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .cost-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
        }

        .cost-box h4 {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .cost-box .total {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-blue);
        }

        .cost-box .breakdown {
            margin-top: 12px;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .cost-diff {
            text-align: center;
            padding: 16px;
            background: var(--bg-card);
            border-radius: 8px;
            margin-top: 16px;
        }

        .cost-diff .label {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .cost-diff .value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--accent-orange);
        }

        /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal h2 {
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 24px;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            header {
                flex-direction: column;
                gap: 16px;
            }

            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .cost-compare {
                grid-template-columns: 1fr;
            }

            .calendar-day {
                font-size: 0.75rem;
                min-height: 40px;
            }

            .calendar-day .type-badge {
                font-size: 0.5rem;
                padding: 1px 4px;
            }
        }

        /* ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ— */
        .calendar-day[draggable="true"] {
            cursor: move;
        }

        .calendar-day.dragging {
            opacity: 0.4;
            cursor: grabbing;
        }

        .calendar-day.drag-over {
            border: 2px dashed var(--accent-blue);
            background: rgba(59, 130, 246, 0.1);
        }

        .calendar-day.drag-over-copy {
            border: 2px dashed var(--accent-green);
            background: rgba(16, 185, 129, 0.1);
        }

        .calendar-day.drag-over-copy::after {
            content: '+';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            color: var(--accent-green);
            font-weight: 700;
            pointer-events: none;
        }

        /* ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .context-menu {
            display: none;
            position: fixed;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 4px;
            z-index: 2000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            min-width: 200px;
        }

        .context-menu.active {
            display: block;
        }

        .context-menu-item {
            padding: 10px 16px;
            cursor: pointer;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-menu-item:hover {
            background: var(--bg-hover);
        }

        .context-menu-divider {
            height: 1px;
            background: var(--border);
            margin: 4px 8px;
        }

        /* å‡¡ä¾‹ */
        .legend {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            margin-bottom: 16px;
            font-size: 0.8rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
        }

        .legend-color.office { background: var(--accent-blue); }
        .legend-color.remote { background: var(--accent-green); }
        .legend-color.trip { background: var(--accent-orange); }
        .legend-color.paid-leave { background: var(--accent-purple); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>å‹¤å‹™ãƒ»å‡ºå¼µç®¡ç†ãƒ„ãƒ¼ãƒ«</h1>
            <div class="month-selector">
                <button onclick="changeMonth(-1)">â—€</button>
                <span id="currentMonth">2026å¹´1æœˆ</span>
                <button onclick="changeMonth(1)">â–¶</button>
            </div>
        </header>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('dashboard')">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</div>
            <div class="tab" onclick="switchTab('input')">âœï¸ å‹¤å‹™å…¥åŠ›</div>
            <div class="tab" onclick="switchTab('expense')">ğŸ’° çµŒè²»å…¥åŠ›</div>
            <div class="tab" onclick="switchTab('flow')">ğŸ¤” å‰ä¹—ã‚Šåˆ¤æ–­</div>
        </div>

        <!-- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
        <div id="dashboard" class="panel active">
            <div class="summary-grid">
                <div class="summary-card blue">
                    <div class="label">å‹¤å‹™æ—¥æ•°</div>
                    <div class="value"><span id="sumWorkDays">0</span><span class="unit">æ—¥</span></div>
                </div>
                <div class="summary-card green">
                    <div class="label">åœ¨å®…å‹¤å‹™</div>
                    <div class="value"><span id="sumRemote">0</span><span class="unit">æ—¥</span></div>
                </div>
                <div class="summary-card blue">
                    <div class="label">å‡ºç¤¾</div>
                    <div class="value"><span id="sumOffice">0</span><span class="unit">æ—¥</span></div>
                </div>
                <div class="summary-card orange">
                    <div class="label">å‡ºå¼µ</div>
                    <div class="value"><span id="sumTrip">0</span><span class="unit">æ—¥</span></div>
                </div>
                <div class="summary-card purple">
                    <div class="label">æœ‰çµ¦</div>
                    <div class="value"><span id="sumPaidLeave">0</span><span class="unit">æ—¥</span></div>
                </div>
                <div class="summary-card red">
                    <div class="label">å€‹äººç«‹æ›¿ åˆè¨ˆ</div>
                    <div class="value">Â¥<span id="sumPersonal">0</span></div>
                </div>
                <div class="summary-card purple">
                    <div class="label">æ³•äººã‚«ãƒ¼ãƒ‰ åˆè¨ˆ</div>
                    <div class="value">Â¥<span id="sumCorporate">0</span></div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item"><span class="legend-color office"></span>å‡ºç¤¾</div>
                <div class="legend-item"><span class="legend-color remote"></span>åœ¨å®…</div>
                <div class="legend-item"><span class="legend-color trip"></span>å‡ºå¼µ</div>
                <div class="legend-item"><span class="legend-color paid-leave"></span>æœ‰çµ¦</div>
                <div class="legend-item"><span style="color: #60a5fa;">â– </span> åœŸæ›œ</div>
                <div class="legend-item"><span style="color: #f87171;">â– </span> æ—¥æ›œãƒ»ç¥æ—¥</div>
            </div>

            <div class="calendar">
                <div class="calendar-header">
                    <span>æ—¥</span><span>æœˆ</span><span>ç«</span><span>æ°´</span><span>æœ¨</span><span>é‡‘</span><span>åœŸ</span>
                </div>
                <div id="calendarGrid" class="calendar-grid"></div>
            </div>

            <div class="form-section">
                <h2>ğŸ“ çµŒè²»æ˜ç´°</h2>
                <table class="expense-table">
                    <thead>
                        <tr>
                            <th>æ—¥ä»˜</th>
                            <th>ç¨®åˆ¥</th>
                            <th>æ”¯æ‰•</th>
                            <th>å†…å®¹</th>
                            <th class="amount">é‡‘é¡</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody id="expenseTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <!-- å‹¤å‹™å…¥åŠ› -->
        <div id="input" class="panel">
            <div class="form-section">
                <h2>ğŸ“… å‹¤å‹™ã‚¿ã‚¤ãƒ—ã‚’ç™»éŒ²</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>æ—¥ä»˜</label>
                        <input type="date" id="workDate">
                    </div>
                    <div class="form-group">
                        <label>å‹¤å‹™ã‚¿ã‚¤ãƒ—</label>
                        <select id="workType">
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="office">å‡ºç¤¾ï¼ˆäº¬æ©‹ï¼‰</option>
                            <option value="remote">åœ¨å®…</option>
                            <option value="trip">å‡ºå¼µ</option>
                            <option value="paid-leave">æœ‰çµ¦</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" id="tripDestGroup" style="display: none;">
                    <label>å‡ºå¼µå…ˆ</label>
                    <input type="text" id="tripDest" placeholder="ä¾‹ï¼šä»™å°">
                </div>
                <button class="btn btn-primary" onclick="saveWorkDay()">ç™»éŒ²</button>
            </div>
        </div>

        <!-- çµŒè²»å…¥åŠ› -->
        <div id="expense" class="panel">
            <!-- ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿ -->
            <div class="form-section">
                <h2>ğŸ“‹ ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿ï¼ˆã‚³ãƒ”ãƒšï¼‰</h2>
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 16px;">
                    Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’å«ã‚ã¦ã‚³ãƒ”ãƒšã—ã¦ãã ã•ã„
                </p>
                <div class="form-row">
                    <div class="form-group">
                        <label>å–ã‚Šè¾¼ã¿ãƒ‘ã‚¿ãƒ¼ãƒ³</label>
                        <select id="importPattern">
                            <option value="personal">â‘  å€‹äººç«‹æ›¿ï¼ˆäº¤é€šè²»ãƒ»å‡ºå¼µæ‰‹å½“ãƒ»å®¿æ³Šè²»ï¼‰</option>
                            <option value="corporate">â‘¡ æ³•äººã‚«ãƒ¼ãƒ‰ï¼ˆäº¤é€šè²»ãƒ»äº¤éš›è²»ãƒ»å®¿æ³Šè²»ï¼‰</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>ãƒ‡ãƒ¼ã‚¿è²¼ã‚Šä»˜ã‘</label>
                    <textarea id="importData" rows="8" placeholder="ã“ã“ã«ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘..." style="width: 100%; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 12px; color: var(--text-primary); font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; resize: vertical;"></textarea>
                </div>
                <div style="display: flex; gap: 12px; align-items: center; margin-top: 12px;">
                    <button class="btn btn-primary" onclick="importFromClipboard()">å–ã‚Šè¾¼ã¿å®Ÿè¡Œ</button>
                    <span id="importResult" style="font-size: 0.85rem; color: var(--text-secondary);"></span>
                </div>
                <div id="importPreview" style="margin-top: 16px; display: none;">
                    <h4 style="font-size: 0.9rem; margin-bottom: 8px;">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆæœ€åˆã®5ä»¶ï¼‰</h4>
                    <div id="importPreviewContent" style="background: var(--bg-secondary); border-radius: 8px; padding: 12px; font-size: 0.8rem; max-height: 200px; overflow-y: auto;"></div>
                </div>
            </div>

            <div class="form-section">
                <h2>âœï¸ æ‰‹å‹•å…¥åŠ›</h2>
                <details style="cursor: pointer;">
                    <summary style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">æ‰‹å‹•ã§1ä»¶ãšã¤å…¥åŠ›ã™ã‚‹å ´åˆã¯ã“ã¡ã‚‰</summary>
                    
                    <div style="margin-top: 16px;">
                        <h3 style="font-size: 0.95rem; margin-bottom: 12px;">ğŸšƒ äº¤é€šè²»</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>æ—¥ä»˜</label>
                                <input type="date" id="transDate">
                            </div>
                            <div class="form-group">
                                <label>ãƒ«ãƒ¼ãƒˆ</label>
                                <input type="text" id="transRoute" placeholder="ä¾‹ï¼šçŸ³å²¡ â†’ æ±äº¬ï¼ˆç‰¹æ€¥ï¼‰">
                            </div>
                            <div class="form-group">
                                <label>é‡‘é¡</label>
                                <input type="number" id="transAmount" placeholder="ä¾‹ï¼š2540">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="saveTransport()">ç™»éŒ²</button>
                        <div class="history-list" id="transHistory"></div>
                    </div>

                    <div style="margin-top: 24px;">
                        <h3 style="font-size: 0.95rem; margin-bottom: 12px;">ğŸ¨ å®¿æ³Šè²»</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>æ—¥ä»˜</label>
                                <input type="date" id="hotelDate">
                            </div>
                            <div class="form-group">
                                <label>å®¿æ³Šå…ˆ</label>
                                <input type="text" id="hotelName" placeholder="ä¾‹ï¼šä»™å°é§…å‰ãƒ›ãƒ†ãƒ«">
                            </div>
                            <div class="form-group">
                                <label>é‡‘é¡</label>
                                <input type="number" id="hotelAmount" placeholder="ä¾‹ï¼š12000">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="saveHotel()">ç™»éŒ²</button>
                        <div class="history-list" id="hotelHistory"></div>
                    </div>

                    <div style="margin-top: 24px;">
                        <h3 style="font-size: 0.95rem; margin-bottom: 12px;">ğŸ’¼ å‡ºå¼µæ‰‹å½“</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>æ—¥ä»˜</label>
                                <input type="date" id="allowanceDate">
                            </div>
                            <div class="form-group">
                                <label>é‡‘é¡ï¼ˆä¸€å¾‹ï¼‰</label>
                                <input type="number" id="allowanceAmount" value="3000" readonly>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="saveAllowance()">ç™»éŒ²</button>
                    </div>
                </details>
            </div>
        </div>

        <!-- å‰ä¹—ã‚Šåˆ¤æ–­ãƒ•ãƒ­ãƒ¼ -->
        <div id="flow" class="panel">
            <div class="flow-card">
                <h2 style="margin-bottom: 24px;">ğŸ¤” å‰ä¹—ã‚Šã™ã¹ãï¼Ÿåˆ¤æ–­ãƒ•ãƒ­ãƒ¼</h2>
                
                <div id="flowStep1" class="flow-step">
                    <div class="flow-question">Q1. å‡ºå¼µå…ˆã¯ã©ã“ï¼Ÿ</div>
                    <div class="flow-options">
                        <div class="flow-option" onclick="selectFlow(1, 'tohoku')">æ±åŒ—ï¼ˆä»™å°ãªã©ï¼‰</div>
                        <div class="flow-option" onclick="selectFlow(1, 'other')">ãã®ä»–</div>
                    </div>
                </div>

                <div id="flowStep2" class="flow-step" style="display: none; margin-top: 24px;">
                    <div class="flow-question">Q2. æ™‚æœŸã¯ï¼Ÿ</div>
                    <div class="flow-options">
                        <div class="flow-option" onclick="selectFlow(2, 'winter')">å†¬å­£ï¼ˆ1ã€œ2æœˆï¼‰</div>
                        <div class="flow-option" onclick="selectFlow(2, 'other')">ãã‚Œä»¥å¤–</div>
                    </div>
                </div>

                <div id="flowStep3" class="flow-step" style="display: none; margin-top: 24px;">
                    <div class="flow-question">Q3. ãã®é€±ã®å‡ºç¤¾å›æ•°ã¯ï¼Ÿ</div>
                    <div class="flow-options">
                        <div class="flow-option" onclick="selectFlow(3, '2plus')">2å›ä»¥ä¸Š</div>
                        <div class="flow-option" onclick="selectFlow(3, '1')">1å›</div>
                        <div class="flow-option" onclick="selectFlow(3, '0')">0å›</div>
                    </div>
                </div>

                <div id="flowResult" style="display: none;"></div>

                <button class="btn btn-secondary" onclick="resetFlow()" style="margin-top: 20px;">ãƒªã‚»ãƒƒãƒˆ</button>
            </div>

            <div class="form-section">
                <h2>ğŸ’° ã‚³ã‚¹ãƒˆæ¯”è¼ƒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>çŸ³å²¡â‡”æ±äº¬ï¼ˆç‰¹æ€¥ãƒ»ç‰‡é“ï¼‰</label>
                        <input type="number" id="costTokyo" value="2540">
                    </div>
                    <div class="form-group">
                        <label>å®¿æ³Šè²»ï¼ˆ1æ³Šï¼‰</label>
                        <input type="number" id="costHotel" value="12000">
                    </div>
                </div>
                <button class="btn btn-primary" onclick="calcCostCompare()">è¨ˆç®—</button>

                <div class="cost-compare" id="costCompareResult" style="display: none;">
                    <div class="cost-box">
                        <h4>æ¡ˆâ‘  å½“æ—¥ç§»å‹•</h4>
                        <div class="total" id="cost1Total">Â¥0</div>
                        <div class="breakdown" id="cost1Breakdown"></div>
                    </div>
                    <div class="cost-box">
                        <h4>æ¡ˆâ‘¡ å‰ä¹—ã‚Š</h4>
                        <div class="total" id="cost2Total">Â¥0</div>
                        <div class="breakdown" id="cost2Breakdown"></div>
                    </div>
                </div>
                <div class="cost-diff" id="costDiff" style="display: none;">
                    <div class="label">å·®é¡ï¼ˆå‰ä¹—ã‚Šã®è¿½åŠ ã‚³ã‚¹ãƒˆï¼‰</div>
                    <div class="value" id="costDiffValue">+Â¥0</div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ—¥ä»˜ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div class="modal-overlay" id="dayModal">
        <div class="modal">
            <h2 id="modalTitle">1æœˆ1æ—¥ã®ç·¨é›†</h2>
            <div class="form-group">
                <label>å‹¤å‹™ã‚¿ã‚¤ãƒ—</label>
                <select id="modalWorkType">
                    <option value="">æœªè¨­å®š</option>
                    <option value="office">å‡ºç¤¾ï¼ˆäº¬æ©‹ï¼‰</option>
                    <option value="remote">åœ¨å®…</option>
                    <option value="trip">å‡ºå¼µ</option>
                    <option value="paid-leave">æœ‰çµ¦</option>
                </select>
            </div>
            <div class="form-group" id="modalTripDestGroup" style="display: none;">
                <label>å‡ºå¼µå…ˆ</label>
                <input type="text" id="modalTripDest" placeholder="ä¾‹ï¼šä»™å°">
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="closeModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button class="btn btn-danger" onclick="deleteWorkDay()">å‰Šé™¤</button>
                <button class="btn btn-primary" onclick="saveModalWorkDay()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <!-- å³ã‚¯ãƒªãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <div class="context-menu" id="contextMenu">
        <div class="context-menu-item" onclick="copyToNextDay()">
            ğŸ“‹ ç¿Œæ—¥ã«ã‚³ãƒ”ãƒ¼
        </div>
        <div class="context-menu-item" onclick="copyToNextWeek()">
            ğŸ“… ç¿Œé€±ã«ã‚³ãƒ”ãƒ¼
        </div>
        <div class="context-menu-item" onclick="copyToMultipleDays()">
            ğŸ“† è¤‡æ•°æ—¥ã«ã‚³ãƒ”ãƒ¼...
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" onclick="editFromContextMenu()">
            âœï¸ ç·¨é›†
        </div>
        <div class="context-menu-item" onclick="deleteFromContextMenu()">
            ğŸ—‘ï¸ å‰Šé™¤
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹
        let currentYear = 2026;
        let currentMonth = 1;
        let selectedDate = null;
        let draggedDate = null;
        let contextMenuDate = null;
        let isCopyMode = false;

        // 2026å¹´ã®ç¥æ—¥ãƒ‡ãƒ¼ã‚¿
        const holidays2026 = {
            '2026-01-01': 'å…ƒæ—¥',
            '2026-01-12': 'æˆäººã®æ—¥',
            '2026-02-11': 'å»ºå›½è¨˜å¿µã®æ—¥',
            '2026-02-23': 'å¤©çš‡èª•ç”Ÿæ—¥',
            '2026-03-20': 'æ˜¥åˆ†ã®æ—¥',
            '2026-04-29': 'æ˜­å’Œã®æ—¥',
            '2026-05-03': 'æ†²æ³•è¨˜å¿µæ—¥',
            '2026-05-04': 'ã¿ã©ã‚Šã®æ—¥',
            '2026-05-05': 'ã“ã©ã‚‚ã®æ—¥',
            '2026-05-06': 'æŒ¯æ›¿ä¼‘æ—¥',
            '2026-07-20': 'æµ·ã®æ—¥',
            '2026-08-11': 'å±±ã®æ—¥',
            '2026-09-21': 'æ•¬è€ã®æ—¥',
            '2026-09-22': 'å›½æ°‘ã®ä¼‘æ—¥',
            '2026-09-23': 'ç§‹åˆ†ã®æ—¥',
            '2026-10-12': 'ã‚¹ãƒãƒ¼ãƒ„ã®æ—¥',
            '2026-11-03': 'æ–‡åŒ–ã®æ—¥',
            '2026-11-23': 'å‹¤åŠ´æ„Ÿè¬ã®æ—¥'
        };

        // ç¥æ—¥åˆ¤å®š
        function isHoliday(dateStr) {
            return holidays2026[dateStr] || null;
        }

        // ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
        let data = {
            workDays: {},    // { "2026-01-15": { type: "office", dest: "" } }
            expenses: [],    // [{ date, category, desc, amount }]
            transHistory: [],
            hotelHistory: []
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            renderAll();
            setupEventListeners();
        });

        // LocalStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        function loadData() {
            const saved = localStorage.getItem('workTrackerData');
            if (saved) {
                data = JSON.parse(saved);
            }
        }

        // LocalStorageã«ãƒ‡ãƒ¼ã‚¿ä¿å­˜
        function saveData() {
            localStorage.setItem('workTrackerData', JSON.stringify(data));
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupEventListeners() {
            document.getElementById('workType').addEventListener('change', (e) => {
                document.getElementById('tripDestGroup').style.display =
                    e.target.value === 'trip' ? 'block' : 'none';
            });

            document.getElementById('modalWorkType').addEventListener('change', (e) => {
                document.getElementById('modalTripDestGroup').style.display =
                    e.target.value === 'trip' ? 'block' : 'none';
            });

            // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
            document.getElementById('dayModal').addEventListener('click', (e) => {
                if (e.target.classList.contains('modal-overlay')) {
                    closeModal();
                }
            });

            // ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.context-menu')) {
                    closeContextMenu();
                }
            });

            // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆAlt/Optionã‚­ãƒ¼æ¤œå‡ºï¼‰
            document.addEventListener('keydown', (e) => {
                if (e.altKey && draggedDate) {
                    isCopyMode = true;
                }
            });

            document.addEventListener('keyup', (e) => {
                if (!e.altKey) {
                    isCopyMode = false;
                }
            });
        }

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            
            document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // æœˆå¤‰æ›´
        function changeMonth(delta) {
            currentMonth += delta;
            if (currentMonth < 1) {
                currentMonth = 12;
                currentYear--;
            } else if (currentMonth > 12) {
                currentMonth = 1;
                currentYear++;
            }
            renderAll();
        }

        // å…¨ä½“ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderAll() {
            document.getElementById('currentMonth').textContent = `${currentYear}å¹´${currentMonth}æœˆ`;
            renderCalendar();
            renderSummary();
            renderExpenseTable();
            renderHistories();
            
            // æ—¥ä»˜å…¥åŠ›ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä»Šæ—¥ã«
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('workDate').value = today;
            document.getElementById('transDate').value = today;
            document.getElementById('hotelDate').value = today;
            document.getElementById('allowanceDate').value = today;
        }

        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            grid.innerHTML = '';

            const firstDay = new Date(currentYear, currentMonth - 1, 1);
            const lastDay = new Date(currentYear, currentMonth, 0);
            const startDayOfWeek = firstDay.getDay();
            const daysInMonth = lastDay.getDate();

            const today = new Date();
            const todayStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;

            // ç©ºç™½ã‚»ãƒ«
            for (let i = 0; i < startDayOfWeek; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.className = 'calendar-day empty';
                grid.appendChild(emptyCell);
            }

            // æ—¥ä»˜ã‚»ãƒ«
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${currentYear}-${String(currentMonth).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const dayData = data.workDays[dateStr];
                const dateObj = new Date(currentYear, currentMonth - 1, day);
                const dayOfWeek = dateObj.getDay();
                const holidayName = isHoliday(dateStr);
                
                const cell = document.createElement('div');
                cell.className = 'calendar-day';
                
                if (dateStr === todayStr) {
                    cell.classList.add('today');
                }
                
                // åœŸæ—¥ç¥ã®åˆ¤å®š
                if (dayOfWeek === 0) {
                    cell.classList.add('sunday');
                } else if (dayOfWeek === 6) {
                    cell.classList.add('saturday');
                }
                if (holidayName) {
                    cell.classList.add('holiday');
                    cell.title = holidayName;
                }
                
                if (dayData) {
                    cell.classList.add(dayData.type);
                }

                cell.innerHTML = `
                    <span class="date">${day}</span>
                    ${dayData ? `<span class="type-badge">${getTypeLabel(dayData.type)}</span>` : ''}
                `;

                // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—è¨­å®š
                if (dayData) {
                    cell.draggable = true;
                    cell.addEventListener('dragstart', (e) => handleDragStart(e, dateStr));
                    cell.addEventListener('dragend', handleDragEnd);
                }

                cell.addEventListener('dragover', handleDragOver);
                cell.addEventListener('dragleave', handleDragLeave);
                cell.addEventListener('drop', (e) => handleDrop(e, dateStr));

                // å·¦ã‚¯ãƒªãƒƒã‚¯ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰
                cell.addEventListener('click', (e) => {
                    if (e.button === 0 && !e.ctrlKey && !e.metaKey) {
                        openDayModal(dateStr, day);
                    }
                });

                // å³ã‚¯ãƒªãƒƒã‚¯ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰
                cell.addEventListener('contextmenu', (e) => {
                    if (dayData) {
                        e.preventDefault();
                        showContextMenu(e, dateStr);
                    }
                });

                grid.appendChild(cell);
            }
        }

        // å‹¤å‹™ã‚¿ã‚¤ãƒ—ã®ãƒ©ãƒ™ãƒ«å–å¾—
        function getTypeLabel(type) {
            const labels = {
                'office': 'å‡ºç¤¾',
                'remote': 'åœ¨å®…',
                'trip': 'å‡ºå¼µ',
                'paid-leave': 'æœ‰çµ¦'
            };
            return labels[type] || '';
        }

        // ã‚µãƒãƒªãƒ¼ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderSummary() {
            const monthPrefix = `${currentYear}-${String(currentMonth).padStart(2, '0')}`;
            
            let counts = { office: 0, remote: 0, trip: 0, 'paid-leave': 0 };
            
            Object.entries(data.workDays).forEach(([date, info]) => {
                if (date.startsWith(monthPrefix)) {
                    counts[info.type]++;
                }
            });

            const workDays = counts.office + counts.remote + counts.trip;
            
            document.getElementById('sumWorkDays').textContent = workDays;
            document.getElementById('sumRemote').textContent = counts.remote;
            document.getElementById('sumOffice').textContent = counts.office;
            document.getElementById('sumTrip').textContent = counts.trip;
            document.getElementById('sumPaidLeave').textContent = counts['paid-leave'];

            // çµŒè²»åˆè¨ˆï¼ˆå€‹äººç«‹æ›¿ãƒ»æ³•äººã‚«ãƒ¼ãƒ‰åˆ¥ï¼‰
            const monthExpenses = data.expenses.filter(e => e.date.startsWith(monthPrefix));
            
            const personalTotal = monthExpenses
                .filter(e => e.paymentType !== 'æ³•äººã‚«ãƒ¼ãƒ‰')
                .reduce((sum, e) => sum + e.amount, 0);
            
            const corporateTotal = monthExpenses
                .filter(e => e.paymentType === 'æ³•äººã‚«ãƒ¼ãƒ‰')
                .reduce((sum, e) => sum + e.amount, 0);
            
            document.getElementById('sumPersonal').textContent = personalTotal.toLocaleString();
            document.getElementById('sumCorporate').textContent = corporateTotal.toLocaleString();
        }

        // çµŒè²»ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderExpenseTable() {
            const monthPrefix = `${currentYear}-${String(currentMonth).padStart(2, '0')}`;
            const tbody = document.getElementById('expenseTableBody');
            
            const monthExpenses = data.expenses
                .filter(e => e.date.startsWith(monthPrefix))
                .sort((a, b) => a.date.localeCompare(b.date));

            if (monthExpenses.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: var(--text-muted);">çµŒè²»ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>';
                return;
            }

            tbody.innerHTML = monthExpenses.map((e, i) => `
                <tr>
                    <td>${formatDate(e.date)}</td>
                    <td>${getCategoryLabel(e.category)}</td>
                    <td><span style="font-size: 0.75rem; padding: 2px 6px; border-radius: 4px; background: ${e.paymentType === 'æ³•äººã‚«ãƒ¼ãƒ‰' ? 'var(--accent-purple)' : 'var(--accent-blue)'};">${e.paymentType || 'å€‹äººç«‹æ›¿'}</span></td>
                    <td>${e.desc}</td>
                    <td class="amount">Â¥${e.amount.toLocaleString()}</td>
                    <td><button class="delete-btn" onclick="deleteExpense(${data.expenses.indexOf(e)})">âœ•</button></td>
                </tr>
            `).join('');
        }

        // ã‚«ãƒ†ã‚´ãƒªãƒ©ãƒ™ãƒ«
        function getCategoryLabel(category) {
            const labels = {
                'transport': 'ğŸšƒ äº¤é€šè²»',
                'hotel': 'ğŸ¨ å®¿æ³Šè²»',
                'allowance': 'ğŸ’¼ å‡ºå¼µæ‰‹å½“',
                'entertainment': 'ğŸ» äº¤éš›è²»',
                'other': 'ğŸ“ ãã®ä»–'
            };
            return labels[category] || category;
        }

        // æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        function formatDate(dateStr) {
            const [y, m, d] = dateStr.split('-');
            return `${parseInt(m)}/${parseInt(d)}`;
        }

        // å±¥æ­´ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderHistories() {
            const transHistory = document.getElementById('transHistory');
            const hotelHistory = document.getElementById('hotelHistory');

            transHistory.innerHTML = data.transHistory.map(h => 
                `<div class="history-item" onclick="fillTransport('${h.route}', ${h.amount})">${h.route} - Â¥${h.amount.toLocaleString()}</div>`
            ).join('');

            hotelHistory.innerHTML = data.hotelHistory.map(h => 
                `<div class="history-item" onclick="fillHotel('${h.name}', ${h.amount})">${h.name} - Â¥${h.amount.toLocaleString()}</div>`
            ).join('');
        }

        // å±¥æ­´ã‹ã‚‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«åæ˜ 
        function fillTransport(route, amount) {
            document.getElementById('transRoute').value = route;
            document.getElementById('transAmount').value = amount;
        }

        function fillHotel(name, amount) {
            document.getElementById('hotelName').value = name;
            document.getElementById('hotelAmount').value = amount;
        }

        // å‹¤å‹™æ—¥ä¿å­˜
        function saveWorkDay() {
            const date = document.getElementById('workDate').value;
            const type = document.getElementById('workType').value;
            const dest = document.getElementById('tripDest').value;

            if (!date || !type) {
                alert('æ—¥ä»˜ã¨å‹¤å‹™ã‚¿ã‚¤ãƒ—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            data.workDays[date] = { type, dest };
            saveData();
            renderAll();
            
            // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('workType').value = '';
            document.getElementById('tripDest').value = '';
            document.getElementById('tripDestGroup').style.display = 'none';

            alert('ç™»éŒ²ã—ã¾ã—ãŸ');
        }

        // äº¤é€šè²»ä¿å­˜
        function saveTransport() {
            const date = document.getElementById('transDate').value;
            const route = document.getElementById('transRoute').value;
            const amount = parseInt(document.getElementById('transAmount').value);

            if (!date || !route || !amount) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            data.expenses.push({ date, category: 'transport', desc: route, amount });
            
            // å±¥æ­´ã«è¿½åŠ ï¼ˆé‡è¤‡æ’é™¤ã€æœ€å¤§10ä»¶ï¼‰
            const historyKey = `${route}-${amount}`;
            data.transHistory = data.transHistory.filter(h => `${h.route}-${h.amount}` !== historyKey);
            data.transHistory.unshift({ route, amount });
            data.transHistory = data.transHistory.slice(0, 10);

            saveData();
            renderAll();

            document.getElementById('transRoute').value = '';
            document.getElementById('transAmount').value = '';

            alert('ç™»éŒ²ã—ã¾ã—ãŸ');
        }

        // å®¿æ³Šè²»ä¿å­˜
        function saveHotel() {
            const date = document.getElementById('hotelDate').value;
            const name = document.getElementById('hotelName').value;
            const amount = parseInt(document.getElementById('hotelAmount').value);

            if (!date || !name || !amount) {
                alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            data.expenses.push({ date, category: 'hotel', desc: name, amount });
            
            // å±¥æ­´ã«è¿½åŠ 
            const historyKey = `${name}-${amount}`;
            data.hotelHistory = data.hotelHistory.filter(h => `${h.name}-${h.amount}` !== historyKey);
            data.hotelHistory.unshift({ name, amount });
            data.hotelHistory = data.hotelHistory.slice(0, 10);

            saveData();
            renderAll();

            document.getElementById('hotelName').value = '';
            document.getElementById('hotelAmount').value = '';

            alert('ç™»éŒ²ã—ã¾ã—ãŸ');
        }

        // å‡ºå¼µæ‰‹å½“ä¿å­˜
        function saveAllowance() {
            const date = document.getElementById('allowanceDate').value;
            const amount = 3000;

            if (!date) {
                alert('æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            data.expenses.push({ date, category: 'allowance', desc: 'å‡ºå¼µæ‰‹å½“', amount });
            saveData();
            renderAll();

            alert('ç™»éŒ²ã—ã¾ã—ãŸ');
        }

        // çµŒè²»å‰Šé™¤
        function deleteExpense(index) {
            if (confirm('ã“ã®çµŒè²»ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                data.expenses.splice(index, 1);
                saveData();
                renderAll();
            }
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œ
        function openDayModal(dateStr, day) {
            selectedDate = dateStr;
            const dayData = data.workDays[dateStr];

            document.getElementById('modalTitle').textContent = `${currentMonth}æœˆ${day}æ—¥ã®ç·¨é›†`;
            document.getElementById('modalWorkType').value = dayData?.type || '';
            document.getElementById('modalTripDest').value = dayData?.dest || '';
            document.getElementById('modalTripDestGroup').style.display = 
                dayData?.type === 'trip' ? 'block' : 'none';

            document.getElementById('dayModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('dayModal').classList.remove('active');
            selectedDate = null;
        }

        function saveModalWorkDay() {
            const type = document.getElementById('modalWorkType').value;
            const dest = document.getElementById('modalTripDest').value;

            if (!type) {
                delete data.workDays[selectedDate];
            } else {
                data.workDays[selectedDate] = { type, dest };
            }

            saveData();
            renderAll();
            closeModal();
        }

        function deleteWorkDay() {
            if (confirm('ã“ã®æ—¥ã®å‹¤å‹™ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                delete data.workDays[selectedDate];
                saveData();
                renderAll();
                closeModal();
            }
        }

        // åˆ¤æ–­ãƒ•ãƒ­ãƒ¼
        let flowAnswers = {};

        function selectFlow(step, answer) {
            flowAnswers[step] = answer;
            
            // é¸æŠçŠ¶æ…‹ã®è¡¨ç¤ºæ›´æ–°
            document.querySelectorAll(`#flowStep${step} .flow-option`).forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.classList.add('selected');

            // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¡¨ç¤º
            if (step === 1) {
                document.getElementById('flowStep2').style.display = 'block';
            } else if (step === 2) {
                document.getElementById('flowStep3').style.display = 'block';
            } else if (step === 3) {
                showFlowResult();
            }
        }

        function showFlowResult() {
            const { 1: dest, 2: season, 3: officeCount } = flowAnswers;
            
            let recommend = false;
            let reason = '';

            // åˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯
            if (dest === 'tohoku' && season === 'winter') {
                recommend = true;
                reason = 'å†¬å­£ã®æ±åŒ—å‡ºå¼µã¯é…å»¶ãƒªã‚¹ã‚¯ãŒé«˜ã„ãŸã‚ã€å‰ä¹—ã‚Šã‚’æ¨å¥¨ã—ã¾ã™ã€‚';
            } else if (dest === 'tohoku' && officeCount === '2plus') {
                recommend = true;
                reason = 'å‡ºç¤¾2å›ã®è¦ä»¶ã‚’æº€ãŸã—ã¦ãŠã‚Šã€å‰ä¹—ã‚Šã®èª¬æ˜ãŒã—ã‚„ã™ã„çŠ¶æ³ã§ã™ã€‚';
            } else if (officeCount === '2plus') {
                recommend = true;
                reason = 'å‡ºç¤¾å›æ•°ãŒç¢ºä¿ã§ãã¦ã„ã‚‹ãŸã‚ã€å‰ä¹—ã‚Šã—ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚';
            } else if (dest === 'other' && season === 'other' && officeCount !== '2plus') {
                recommend = false;
                reason = 'ç‰¹æ®µã®ãƒªã‚¹ã‚¯è¦å› ãŒãªã„ãŸã‚ã€å½“æ—¥ç§»å‹•ã§ã‚‚å•é¡Œãªã„ã§ã—ã‚‡ã†ã€‚';
            } else {
                recommend = false;
                reason = 'çŠ¶æ³ã«å¿œã˜ã¦åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚è¿½åŠ ã‚³ã‚¹ãƒˆã¨ç§»å‹•è² è·ã‚’æ¯”è¼ƒã—ã¾ã—ã‚‡ã†ã€‚';
            }

            const resultDiv = document.getElementById('flowResult');
            resultDiv.style.display = 'block';
            resultDiv.className = `flow-result ${recommend ? 'recommend' : 'not-recommend'}`;
            resultDiv.innerHTML = `
                <h3>${recommend ? 'âœ… å‰ä¹—ã‚Šæ¨å¥¨' : 'âš ï¸ å½“æ—¥ç§»å‹•ã§OK'}</h3>
                <p>${reason}</p>
            `;
        }

        function resetFlow() {
            flowAnswers = {};
            document.querySelectorAll('.flow-option').forEach(opt => opt.classList.remove('selected'));
            document.getElementById('flowStep2').style.display = 'none';
            document.getElementById('flowStep3').style.display = 'none';
            document.getElementById('flowResult').style.display = 'none';
        }

        // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—æ©Ÿèƒ½
        function handleDragStart(e, dateStr) {
            draggedDate = dateStr;
            isCopyMode = e.altKey;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = isCopyMode ? 'copy' : 'move';
            e.dataTransfer.setData('text/plain', dateStr);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedDate = null;
            isCopyMode = false;
            // ã™ã¹ã¦ã®drag-overã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            document.querySelectorAll('.drag-over, .drag-over-copy').forEach(el => {
                el.classList.remove('drag-over', 'drag-over-copy');
            });
        }

        function handleDragOver(e) {
            if (!draggedDate) return;
            e.preventDefault();

            // Altã‚­ãƒ¼ã®çŠ¶æ…‹ã‚’å¸¸ã«ãƒã‚§ãƒƒã‚¯
            isCopyMode = e.altKey;
            e.dataTransfer.dropEffect = isCopyMode ? 'copy' : 'move';

            const cell = e.currentTarget;
            cell.classList.remove('drag-over', 'drag-over-copy');
            cell.classList.add(isCopyMode ? 'drag-over-copy' : 'drag-over');
        }

        function handleDragLeave(e) {
            const cell = e.currentTarget;
            cell.classList.remove('drag-over', 'drag-over-copy');
        }

        function handleDrop(e, targetDateStr) {
            e.preventDefault();
            if (!draggedDate || draggedDate === targetDateStr) return;

            const sourceData = data.workDays[draggedDate];
            if (!sourceData) return;

            if (isCopyMode || e.altKey) {
                // ã‚³ãƒ”ãƒ¼
                data.workDays[targetDateStr] = { ...sourceData };
            } else {
                // ç§»å‹•
                data.workDays[targetDateStr] = sourceData;
                delete data.workDays[draggedDate];
            }

            saveData();
            renderAll();

            // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
            document.querySelectorAll('.drag-over, .drag-over-copy').forEach(el => {
                el.classList.remove('drag-over', 'drag-over-copy');
            });
        }

        // å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼æ©Ÿèƒ½
        function showContextMenu(e, dateStr) {
            e.preventDefault();
            contextMenuDate = dateStr;

            const menu = document.getElementById('contextMenu');
            menu.style.left = `${e.pageX}px`;
            menu.style.top = `${e.pageY}px`;
            menu.classList.add('active');
        }

        function closeContextMenu() {
            document.getElementById('contextMenu').classList.remove('active');
            contextMenuDate = null;
        }

        function copyToNextDay() {
            if (!contextMenuDate) return;

            const sourceData = data.workDays[contextMenuDate];
            if (!sourceData) return;

            const date = new Date(contextMenuDate);
            date.setDate(date.getDate() + 1);
            const targetDateStr = date.toISOString().split('T')[0];

            data.workDays[targetDateStr] = { ...sourceData };
            saveData();
            renderAll();
            closeContextMenu();

            alert(`ç¿Œæ—¥ï¼ˆ${formatDate(targetDateStr)}ï¼‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ`);
        }

        function copyToNextWeek() {
            if (!contextMenuDate) return;

            const sourceData = data.workDays[contextMenuDate];
            if (!sourceData) return;

            const date = new Date(contextMenuDate);
            date.setDate(date.getDate() + 7);
            const targetDateStr = date.toISOString().split('T')[0];

            data.workDays[targetDateStr] = { ...sourceData };
            saveData();
            renderAll();
            closeContextMenu();

            alert(`ç¿Œé€±ï¼ˆ${formatDate(targetDateStr)}ï¼‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ`);
        }

        function copyToMultipleDays() {
            if (!contextMenuDate) return;

            const sourceData = data.workDays[contextMenuDate];
            if (!sourceData) return;

            const days = prompt('ä½•æ—¥åˆ†ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã‹ï¼Ÿï¼ˆä¾‹ï¼š5ï¼‰');
            const numDays = parseInt(days);

            if (!numDays || numDays < 1 || numDays > 31) {
                alert('1ã€œ31ã®æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const startDate = new Date(contextMenuDate);
            let copiedCount = 0;

            for (let i = 1; i <= numDays; i++) {
                const targetDate = new Date(startDate);
                targetDate.setDate(targetDate.getDate() + i);
                const targetDateStr = targetDate.toISOString().split('T')[0];

                data.workDays[targetDateStr] = { ...sourceData };
                copiedCount++;
            }

            saveData();
            renderAll();
            closeContextMenu();

            alert(`${copiedCount}æ—¥åˆ†ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ`);
        }

        function editFromContextMenu() {
            if (!contextMenuDate) return;

            const date = new Date(contextMenuDate);
            const day = date.getDate();

            closeContextMenu();
            openDayModal(contextMenuDate, day);
        }

        function deleteFromContextMenu() {
            if (!contextMenuDate) return;

            if (confirm('ã“ã®æ—¥ã®å‹¤å‹™ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                delete data.workDays[contextMenuDate];
                saveData();
                renderAll();
            }

            closeContextMenu();
        }

        // ã‚³ã‚¹ãƒˆæ¯”è¼ƒè¨ˆç®—
        function calcCostCompare() {

        // ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿æ©Ÿèƒ½
        function importFromClipboard() {
            const pattern = document.getElementById('importPattern').value;
            const rawData = document.getElementById('importData').value.trim();
            
            if (!rawData) {
                alert('ãƒ‡ãƒ¼ã‚¿ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„');
                return;
            }

            const lines = rawData.split('\n');
            if (lines.length < 2) {
                alert('ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã¨ãƒ‡ãƒ¼ã‚¿è¡ŒãŒå¿…è¦ã§ã™');
                return;
            }

            // ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ãƒ‘ãƒ¼ã‚¹
            const headers = lines[0].split('\t').map(h => h.trim());
            
            // å¿…è¦ãªã‚«ãƒ©ãƒ ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å–å¾—
            const dateIdx = headers.findIndex(h => h === 'æ—¥ä»˜');
            const categoryIdx = headers.findIndex(h => h === 'è²»ç›®');
            const paymentIdx = headers.findIndex(h => h === 'æ”¯æ‰•ç¨®åˆ¥');
            const descIdx = headers.findIndex(h => h === 'å†…å®¹ãƒ»åŒºé–“');
            const amountIdx = headers.findIndex(h => h === 'é‡‘é¡');

            if (dateIdx === -1 || categoryIdx === -1 || amountIdx === -1) {
                alert('å¿…è¦ãªã‚«ãƒ©ãƒ ï¼ˆæ—¥ä»˜ã€è²»ç›®ã€é‡‘é¡ï¼‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return;
            }

            // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¡ä»¶
            const targetPayment = pattern === 'personal' ? 'å€‹äººç«‹æ›¿' : 'æ³•äººã‚«ãƒ¼ãƒ‰';
            const targetCategories = pattern === 'personal' 
                ? ['äº¤é€šè²»', 'å‡ºå¼µæ‰‹å½“', 'å®¿æ³Šè²»']
                : ['äº¤é€šè²»', 'äº¤éš›è²»', 'å®¿æ³Šè²»', 'ä¼šè­°è²»'];

            let imported = [];
            let skipped = 0;

            for (let i = 1; i < lines.length; i++) {
                const cols = lines[i].split('\t');
                if (cols.length < Math.max(dateIdx, categoryIdx, paymentIdx, descIdx, amountIdx) + 1) {
                    skipped++;
                    continue;
                }

                const payment = cols[paymentIdx]?.trim();
                const category = cols[categoryIdx]?.trim();

                // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
                if (payment !== targetPayment) {
                    skipped++;
                    continue;
                }
                if (!targetCategories.includes(category)) {
                    skipped++;
                    continue;
                }

                // æ—¥ä»˜ã‚’ãƒ‘ãƒ¼ã‚¹ï¼ˆ2025/11/06 or 2025/1/22 å½¢å¼ï¼‰
                const dateRaw = cols[dateIdx]?.trim();
                const dateParts = dateRaw.split('/');
                if (dateParts.length !== 3) {
                    skipped++;
                    continue;
                }
                const year = dateParts[0];
                const month = dateParts[1].padStart(2, '0');
                const day = dateParts[2].padStart(2, '0');
                const dateStr = `${year}-${month}-${day}`;

                // é‡‘é¡ã‚’ãƒ‘ãƒ¼ã‚¹
                const amount = parseInt(cols[amountIdx]?.trim()) || 0;
                if (amount <= 0) {
                    skipped++;
                    continue;
                }

                // å†…å®¹
                const desc = cols[descIdx]?.trim() || '';

                // ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ã‚¢ãƒ—ãƒªå†…ã®å½¢å¼ã«å¤‰æ›
                let appCategory;
                if (category === 'äº¤é€šè²»') appCategory = 'transport';
                else if (category === 'å®¿æ³Šè²»') appCategory = 'hotel';
                else if (category === 'å‡ºå¼µæ‰‹å½“') appCategory = 'allowance';
                else if (category === 'äº¤éš›è²»' || category === 'ä¼šè­°è²»') appCategory = 'entertainment';
                else appCategory = 'other';

                // æ”¯æ‰•ç¨®åˆ¥ã‚’è¿½åŠ 
                const paymentType = pattern === 'personal' ? 'å€‹äººç«‹æ›¿' : 'æ³•äººã‚«ãƒ¼ãƒ‰';

                imported.push({
                    date: dateStr,
                    category: appCategory,
                    desc: desc,
                    amount: amount,
                    paymentType: paymentType
                });
            }

            if (imported.length === 0) {
                document.getElementById('importResult').textContent = `å–ã‚Šè¾¼ã¿å¯¾è±¡ãŒ0ä»¶ã§ã—ãŸï¼ˆã‚¹ã‚­ãƒƒãƒ—: ${skipped}ä»¶ï¼‰`;
                document.getElementById('importResult').style.color = 'var(--accent-orange)';
                return;
            }

            // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
            const preview = imported.slice(0, 5).map(e => 
                `${e.date} | ${getCategoryLabel(e.category)} | ${e.desc} | Â¥${e.amount.toLocaleString()}`
            ).join('<br>');
            
            document.getElementById('importPreview').style.display = 'block';
            document.getElementById('importPreviewContent').innerHTML = preview + 
                (imported.length > 5 ? `<br>... ä»– ${imported.length - 5}ä»¶` : '');

            // ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
            if (confirm(`${imported.length}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šè¾¼ã¿ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ\nï¼ˆã‚¹ã‚­ãƒƒãƒ—: ${skipped}ä»¶ï¼‰`)) {
                // é‡è¤‡ãƒã‚§ãƒƒã‚¯ç”¨ã®ã‚­ãƒ¼ç”Ÿæˆ
                const existingKeys = new Set(
                    data.expenses.map(e => `${e.date}-${e.category}-${e.amount}-${e.desc}`)
                );

                let addedCount = 0;
                let duplicateCount = 0;

                imported.forEach(e => {
                    const key = `${e.date}-${e.category}-${e.amount}-${e.desc}`;
                    if (existingKeys.has(key)) {
                        duplicateCount++;
                    } else {
                        data.expenses.push(e);
                        existingKeys.add(key);
                        addedCount++;
                    }
                });

                saveData();
                renderAll();

                let resultMsg = `âœ… ${addedCount}ä»¶ã‚’å–ã‚Šè¾¼ã¿ã¾ã—ãŸ`;
                if (duplicateCount > 0) {
                    resultMsg += `ï¼ˆé‡è¤‡ã‚¹ã‚­ãƒƒãƒ—: ${duplicateCount}ä»¶ï¼‰`;
                }
                document.getElementById('importResult').textContent = resultMsg;
                document.getElementById('importResult').style.color = 'var(--accent-green)';
                document.getElementById('importData').value = '';
                document.getElementById('importPreview').style.display = 'none';
            }
        }
            const tokyoCost = parseInt(document.getElementById('costTokyo').value) || 2540;
            const hotelCost = parseInt(document.getElementById('costHotel').value) || 12000;

            // æ¡ˆâ‘ ï¼šå½“æ—¥ç§»å‹•
            // æœˆå‡ºç¤¾ + æ°´å‡ºç¤¾ + æœ¨çŸ³å²¡â†’æ±äº¬ + ä»™å°1æ³Š
            const cost1_mon = tokyoCost * 2;  // å¾€å¾©
            const cost1_wed = tokyoCost * 2;  // å¾€å¾©
            const cost1_thu = tokyoCost;      // ç‰‡é“ï¼ˆçŸ³å²¡â†’æ±äº¬ï¼‰
            const cost1_hotel = hotelCost;    // 1æ³Š
            const cost1_total = cost1_mon + cost1_wed + cost1_thu + cost1_hotel;

            // æ¡ˆâ‘¡ï¼šå‰ä¹—ã‚Š
            // æœˆå‡ºç¤¾ + æ°´ç‰‡é“ + ä»™å°2æ³Š
            const cost2_mon = tokyoCost * 2;  // å¾€å¾©
            const cost2_wed = tokyoCost;      // ç‰‡é“
            const cost2_hotel = hotelCost * 2; // 2æ³Š
            const cost2_total = cost2_mon + cost2_wed + cost2_hotel;

            document.getElementById('costCompareResult').style.display = 'grid';
            document.getElementById('costDiff').style.display = 'block';

            document.getElementById('cost1Total').textContent = `Â¥${cost1_total.toLocaleString()}`;
            document.getElementById('cost1Breakdown').innerHTML = `
                æœˆå‡ºç¤¾: Â¥${cost1_mon.toLocaleString()}<br>
                æ°´å‡ºç¤¾: Â¥${cost1_wed.toLocaleString()}<br>
                æœ¨ç§»å‹•: Â¥${cost1_thu.toLocaleString()}<br>
                å®¿æ³Š1æ³Š: Â¥${cost1_hotel.toLocaleString()}
            `;

            document.getElementById('cost2Total').textContent = `Â¥${cost2_total.toLocaleString()}`;
            document.getElementById('cost2Breakdown').innerHTML = `
                æœˆå‡ºç¤¾: Â¥${cost2_mon.toLocaleString()}<br>
                æ°´ç‰‡é“: Â¥${cost2_wed.toLocaleString()}<br>
                å®¿æ³Š2æ³Š: Â¥${cost2_hotel.toLocaleString()}
            `;

            const diff = cost2_total - cost1_total;
            document.getElementById('costDiffValue').textContent = `+Â¥${diff.toLocaleString()}`;
        }
    </script>
</body>
</html>
